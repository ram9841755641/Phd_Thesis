window.Modernizr=function(ap,ao,an){function I(b){ah.cssText=b}function aa(d,c){return I(ae.join(d+";")+(c||""))}function Y(d,c){return typeof d===c}function W(d,c){return !!~(""+d).indexOf(c)}function U(f,c){for(var h in f){var g=f[h];if(!W(g,"-")&&ah[g]!==an){return c=="pfx"?g:!0}}return !1}function S(g,c,k){for(var j in g){var h=c[g[j]];if(h!==an){return k===!1?g[j]:Y(h,"function")?h.bind(k||c):h}}return !1}function Q(g,f,k){var j=g.charAt(0).toUpperCase()+g.slice(1),h=(g+" "+ac.join(j+" ")+j).split(" ");return Y(f,"string")||Y(f,"undefined")?U(h,f):(h=(g+" "+ab.join(j+" ")+j).split(" "),S(h,f,k))}function O(){al.input=function(f){for(var b=0,a=f.length;b<a;b++){V[f[b]]=f[b] in ag}return V.list&&(V.list=!!ao.createElement("datalist")&&!!ap.HTMLDataListElement),V}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var am="2.6.2",al={},ak=ao.documentElement,aj="modernizr",ai=ao.createElement(aj),ah=ai.style,ag=ao.createElement("input"),af={}.toString,ae=" -webkit- -moz- -o- -ms- ".split(" "),ad="Webkit Moz O ms",ac=ad.split(" "),ab=ad.toLowerCase().split(" "),Z={},X={},V={},T=[],R=T.slice,P,N=function(w,u,t,s){var r,q,p,o,g=ao.createElement("div"),f=ao.body,b=f||ao.createElement("body");if(parseInt(t,10)){while(t--){p=ao.createElement("div"),p.id=s?s[t]:aj+(t+1),g.appendChild(p)}}return r=["&#173;",'<style id="s',aj,'">',w,"</style>"].join(""),g.id=aj,(f?g:b).innerHTML+=r,b.appendChild(g),f||(b.style.background="",b.style.overflow="hidden",o=ak.style.overflow,ak.style.overflow="hidden",ak.appendChild(b)),q=u(g,w),f?g.parentNode.removeChild(g):(b.parentNode.removeChild(b),ak.style.overflow=o),!!q},M=function(){function c(h,g){g=g||ao.createElement(b[h]||"div"),h="on"+h;var a=h in g;return a||(g.setAttribute||(g=ao.createElement("div")),g.setAttribute&&g.removeAttribute&&(g.setAttribute(h,""),a=Y(g[h],"function"),Y(g[h],"undefined")||(g[h]=an),g.removeAttribute(h))),g=null,a}var b={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return c}(),K={}.hasOwnProperty,J;!Y(K,"undefined")&&!Y(K.call,"undefined")?J=function(d,c){return K.call(d,c)}:J=function(d,c){return c in d&&Y(d.constructor.prototype[c],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var h=this;if(typeof h!="function"){throw new TypeError}var g=R.call(arguments,1),f=function(){if(this instanceof f){var b=function(){};b.prototype=h.prototype;var d=new b,c=h.apply(d,g.concat(R.call(arguments)));return Object(c)===c?c:d}return h.apply(a,g.concat(R.call(arguments)))};return f});for(var L in Z){J(Z,L)&&(P=L.toLowerCase(),al[P]=Z[L](),T.push((al[P]?"":"no-")+P))}return al.input||O(),al.addTest=function(e,c){if(typeof e=="object"){for(var f in e){J(e,f)&&al.addTest(f,e[f])}}else{e=e.toLowerCase();if(al[e]!==an){return al}c=typeof c=="function"?c():c,typeof enableClasses!="undefined"&&enableClasses&&(ak.className+=" "+(c?"":"no-")+e),al[e]=c}return al},I(""),ai=ag=null,al._version=am,al._prefixes=ae,al._domPrefixes=ab,al._cssomPrefixes=ac,al.hasEvent=M,al.testProp=function(b){return U([b])},al.testAllProps=Q,al.testStyles=N,al}(this,this.document),function(ad,ac,ab){function aa(b){return"[object Function]"==P.call(b)}function Z(b){return"string"==typeof b}function Y(){}function X(b){return !b||"loaded"==b||"complete"==b||"uninitialized"==b}function W(){var b=O.shift();M=1,b?b.t?R(function(){("c"==b.t?L.injectCss:L.injectJs)(b.s,0,b.a,b.x,b.e,1)},0):(b(),W()):M=0}function V(x,w,t,s,q,p,n){function m(a){if(!g&&X(h.readyState)&&(y.r=g=1,!M&&W(),h.onload=h.onreadystatechange=null,a)){"img"!=x&&R(function(){I.removeChild(h)},50);for(var c in D[w]){D[w].hasOwnProperty(c)&&D[w][c].onload()}}}var n=n||L.errorTimeout,h=ac.createElement(x),g=0,b=0,y={t:t,s:w,e:q,a:p,x:n};1===D[w]&&(b=1,D[w]=[]),"object"==x?h.data=w:(h.src=w,h.type=x),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){m.call(this,b)},O.splice(s,0,y),"img"!=x&&(b||2===D[w]?(I.insertBefore(h,J?null:Q),R(m,n)):D[w].push(h))}function U(g,e,k,j,h){return M=0,e=e||"j",Z(g)?V("c"==e?G:H,g,e,this.i++,k,j,h):(O.splice(this.i++,0,g),1==O.length&&W()),this}function T(){var b=L;return b.loader={load:U,i:0},b}var S=ac.documentElement,R=ad.setTimeout,Q=ac.getElementsByTagName("script")[0],P={}.toString,O=[],M=0,K="MozAppearance" in S.style,J=K&&!!ac.createRange().compareNode,I=J?S:Q.parentNode,S=ad.opera&&"[object Opera]"==P.call(ad.opera),S=!!ac.attachEvent&&!S,H=K?"object":S?"script":"img",G=S?"script":H,F=Array.isArray||function(b){return"[object Array]"==P.call(b)},E=[],D={},C={timeout:function(d,c){return c.length&&(d.timeout=c[0]),d}},N,L;L=function(e){function c(j){var j=j.split("!"),h=E.length,r=j.pop(),q=j.length,r={url:r,origUrl:r,prefixes:j},p,o,l;for(o=0;o<q;o++){l=j[o].split("="),(p=C[l.shift()])&&(r=p(r,l))}for(o=0;o<h;o++){r=E[o](r)}return r}function n(b,s,r,q,p){var o=c(b),l=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(s&&(s=aa(s)?s:s[b]||s[q]||s[b.split("/").pop().split("?")[0]]),o.instead?o.instead(b,s,r,q,p):(D[o.url]?o.noexec=!0:D[o.url]=1,r.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":ab,o.noexec,o.attrs,o.timeout),(aa(s)||aa(l))&&r.load(function(){T(),s&&s(o.origUrl,p,q),l&&l(o.origUrl,p,q),D[o.url]=2})))}function m(x,w){function u(b,h){if(b){if(Z(b)){h||(r=function(){var j=[].slice.call(arguments);q.apply(this,j),p()}),n(b,r,w,0,t)}else{if(Object(b)===b){for(g in o=function(){var a=0,j;for(j in b){b.hasOwnProperty(j)&&a++}return a}(),b){b.hasOwnProperty(g)&&(!h&&!--o&&(aa(r)?r=function(){var j=[].slice.call(arguments);q.apply(this,j),p()}:r[g]=function(j){return function(){var a=[].slice.call(arguments);j&&j.apply(this,a),p()}}(q[g])),n(b[g],r,w,g,t))}}}}else{!h&&p()}}var t=!!x.test,s=x.load||x.both,r=x.callback||Y,q=r,p=x.complete||Y,o,g;u(t?x.yep:x.nope,!!s),s&&u(s)}var k,f,d=this.yepnope.loader;if(Z(e)){n(e,0,d,0)}else{if(F(e)){for(k=0;k<e.length;k++){f=e[k],Z(f)?n(f,0,d,0):F(f)?L(f):Object(f)===f&&m(f,d)}}else{Object(e)===e&&m(e,d)}}},L.addPrefix=function(d,c){C[d]=c},L.addFilter=function(b){E.push(b)},L.errorTimeout=10000,null==ac.readyState&&ac.addEventListener&&(ac.readyState="loading",ac.addEventListener("DOMContentLoaded",N=function(){ac.removeEventListener("DOMContentLoaded",N,0),ac.readyState="complete"},0)),ad.yepnope=T(),ad.yepnope.executeStack=W,ad.yepnope.injectJs=function(r,q,p,n,m,h){var g=ac.createElement("script"),f,b,n=n||L.errorTimeout;g.src=r;for(b in p){g.setAttribute(b,p[b])}q=h?W:q||Y,g.onreadystatechange=g.onload=function(){!f&&X(g.readyState)&&(f=1,q(),g.onload=g.onreadystatechange=null)},R(function(){f||(f=1,q(1))},n),m?g.onload():Q.parentNode.insertBefore(g,Q)},ad.yepnope.injectCss=function(b,n,m,l,k,h){var l=ac.createElement("link"),f,n=h?W:n||Y;l.href=b,l.rel="stylesheet",l.type="text/css";for(f in m){l.setAttribute(f,m[f])}k||(Q.parentNode.insertBefore(l,Q),R(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var GSFN;if(GSFN===undefined){GSFN={}}if(!GSFN.initialized){GSFN.gId=function(a){return document.getElementById(a)};GSFN.hasClassName=function(a,b){var c=a.className;return(c.length>0&&(c===b||new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)))};GSFN.addClassName=function(a,b){if(!GSFN.hasClassName(a,b)){a.className+=(a.className?" ":"")+b}return a};GSFN.removeClassName=function(a,b){var c=GSFN.strip(a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "));a.className=c;return a};GSFN.strip=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")};GSFN.add_css=function(c){var a=document.getElementsByTagName("head")[0];var b=document.createElement("style");b.type="text/css";if(b.styleSheet){b.styleSheet.cssText=c}else{rules=document.createTextNode(c);b.appendChild(rules)}a.appendChild(b)};GSFN.initialized=true}GSFN.feedback_widget=function(f){this.widget_disabled=false;this.options=f;this.is_ssl=("https:"===document.location.protocol);if(!this.options.display){this.options.display="overlay"
}if(this.is_ssl){this.feedback_base_url=this.local_ssl_base_url;this.asset_base_url=this.s3_ssl_base_url}else{this.feedback_base_url=this.local_base_url;this.asset_base_url=this.s3_base_url}if(this.options.local_assets===true){this.asset_base_url=this.feedback_base_url}var e=this.options.auto_tag===false;this.query=[];if(!e){if(this.options.product){this.query.push("product="+encodeURIComponent(this.options.product))}if(this.options.tag){this.query.push("tag="+encodeURIComponent(this.options.tag))}if(this.options.user_defined_code){this.query.push("user_defined_code="+encodeURIComponent(this.options.user_defined_code))}}if(this.options.display){this.query.push("display="+encodeURIComponent(this.options.display))}if(this.options.style){this.query.push("style="+encodeURIComponent(this.options.style))}if(this.options.popular_topics){this.query.push("popular_topics="+encodeURIComponent(this.options.popular_topics))}if(this.options.limit){this.query.push("limit="+encodeURIComponent(this.options.limit))}if(this.options.problem){this.query.push("problem="+encodeURIComponent(this.options.problem))}if(this.options.powered_by){this.query.push("powered_by="+encodeURIComponent(this.options.powered_by))}if(this.options.custom_css){this.query.push("custom_css="+encodeURIComponent(this.options.custom_css))}if(this.options.custom_ie_css){this.query.push("custom_ie_css="+encodeURIComponent(this.options.custom_ie_css))}if(this.options.custom_js){this.query.push("custom_js="+encodeURIComponent(this.options.custom_js))}if(this.options.auto_tag===false){this.query.push("auto_tag="+encodeURIComponent(this.options.auto_tag))}if(this.options.interstitial){this.query.push("interstitial="+encodeURIComponent(this.options.interstitial))}if(this.options.community_base_url){this.query.push("community_base_url="+encodeURIComponent(this.options.community_base_url))}if(this.options.document_domain){this.query.push("document_domain="+encodeURIComponent(this.options.document_domain))}var c=this.get_fastpass_url(this.options);if(c){this.query.push("fastpass="+encodeURIComponent(c))}this.query_string="?"+this.query.join("&");this.feedback_url=this.feedback_base_url+"/"+this.options.company+"/feedback/topics/new"+this.query_string;this.options=f?f:{};this.options.placement=this.options.placement?this.options.placement:"left";this.options.color=this.options.color?this.options.color:"#222";if(this.options.display==="overlay"){this.initial_iframe_url="";if(!this.options.width){this.options.width="658px"}if(!this.options.height){this.options.height="100%"}}else{this.initial_iframe_url=this.feedback_url;if(!this.options.width){this.options.width="100%"}if(!this.options.height){this.options.height="500px"}}if(this.widget_disabled){this.iframe_html='<div id="fdbk_iframe" style="position:relative; top: 20px; margin:20px;background:orange;color:purple;font-size:72px; padding: 20px;">WIDGETS ARE UNAVAILABLE LOL</div>'}else{this.iframe_html='<iframe id="fdbk_iframe" allowTransparency="true" scrolling="no" frameborder="0" class="loading"'+(this.initial_iframe_url!==""?' src="'+this.initial_iframe_url+'"':"")+' width="'+this.options.width+'" height="'+this.options.height+'" style="width: '+this.options.width+"; height: "+this.options.height+';"></iframe>'}this.tab_html='<a href="#" id="fdbk_tab" class="fdbk_tab_'+this.options.placement+'" style="background-color:'+this.options.color+'">FEEDBACK</a>';this.overlay_html='<div id="fdbk_overlay" style="display:none"><div id="fdbk_container"><a href="#" id="fdbk_close"></a>'+this.iframe_html+'</div><div id="fdbk_screen"></div></div>';if(this.options.display==="overlay"){raw_css="#fdbk_overlay {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1000000;\n  position: absolute; }\n\n#fdbk_screen {\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 100%;\n  position: absolute;\n  background-color: black;\n  opacity: 0.45;\n  -moz-opacity: 0.45;\n  filter: alpha(opacity=45); }\n\n#fdbk_container {\n  width: 680px;\n  height: 640px;\n  margin: 0 auto;\n  z-index: 2;\n  position: relative; }\n  #fdbk_container iframe {\n    width: 658px;\n    height: 100%;\n    margin: 20px;\n    background: transparent; }\n  #fdbk_container iframe.loading {\n    background: transparent url(https://s3.amazonaws.com/getsatisfaction.com/images/fb_loading.png) no-repeat; }\n\na#fdbk_tab {\n  top: 30%;\n  left: 0;\n  width: 42px;\n  height: 102px;\n  color: white;\n  cursor: pointer;\n  text-indent: -100000px;\n  overflow: hidden;\n  position: fixed;\n  z-index: 100000;\n  margin-left: -7px;\n  background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback_trans_tab.png);\n  _position: absolute;\n  _background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback_tab_ie6.png); }\n  a#fdbk_tab:hover {\n    margin-left: -4px; }\n\na.fdbk_tab_right {\n  right: 0 !important;\n  left: auto !important;\n  margin-right: 0 !important;\n  margin-left: auto !important;\n  width: 35px !important; }\n  a.fdbk_tab_right:hover {\n    width: 38px !important;\n    margin-right: 0 !important;\n    margin-left: auto !important; }\n\na.fdbk_tab_bottom {\n  top: auto !important;\n  bottom: 0 !important;\n  left: 20% !important;\n  height: 38px !important;\n  width: 102px !important;\n  background-position: 0 -102px !important;\n  margin-bottom: -7px !important;\n  margin-left: auto !important; }\n  a.fdbk_tab_bottom:hover {\n    margin-bottom: -4px !important;\n    margin-left: auto !important; }\n\na.fdbk_tab_hidden {\n  display: none !important; }\n\na#fdbk_close {\n  position: absolute;\n  cursor: pointer;\n  outline: none;\n  top: 0;\n  left: 0;\n  z-index: 4;\n  width: 42px;\n  height: 42px;\n  overflow: hidden;\n  background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback-close.png);\n  _background: none;\n  _filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='https://s3.amazonaws.com/getsatisfaction.com/images/feedback-close.png', sizingMethod='crop'); }\n  a#fdbk_close:hover {\n    background-position: -42px 0; }\n\n.feedback_tab_on embed, .feedback_tab_on select, .feedback_tab_on object {\n  visibility: hidden; }\n";replacer_regex=new RegExp(this.s3_ssl_base_url,"g");translated_css=raw_css.replace(replacer_regex,this.asset_base_url);GSFN.add_css(translated_css);if(this.options.container){var d=GSFN.gId(this.options.container);d.innerHTML=this.tab_html+this.overlay_html}else{document.write(this.tab_html);document.write(this.overlay_html)}var b=this;GSFN.gId("fdbk_tab").onclick=function(){b.show();return false};GSFN.gId("fdbk_close").onclick=function(){b.hide();return false};GSFN.gId("fdbk_iframe").removeAttribute("src")}else{if(this.options.container){var a=GSFN.gId(this.options.container);a.innerHTML=this.iframe_html}else{document.write(this.iframe_html)}}};GSFN.feedback_widget.prototype={local_base_url:"http://getsatisfaction.com",local_ssl_base_url:"https://getsatisfaction.com",s3_base_url:"http://s3.amazonaws.com/getsatisfaction.com",s3_ssl_base_url:"https://s3.amazonaws.com/getsatisfaction.com",asset_url:function(a){return this.asset_base_url+a},set_position:function(){this.scroll_top=document.documentElement.scrollTop||document.body.scrollTop;this.scroll_height=document.documentElement.scrollHeight;this.client_height=window.innerHeight||document.documentElement.clientHeight;GSFN.gId("fdbk_screen").style.height=this.scroll_height+"px";GSFN.gId("fdbk_container").style.top=this.scroll_top+(this.client_height*0.1)+"px"},show:function(){GSFN.gId("fdbk_iframe").setAttribute("src",this.feedback_url);if(GSFN.gId("fdbk_iframe").addEventListener){GSFN.gId("fdbk_iframe").addEventListener("load",this.loaded,false)}else{if(GSFN.gId("fdbk_iframe").attachEvent){GSFN.gId("fdbk_iframe").attachEvent("onload",this.loaded)}}this.set_position();GSFN.addClassName(document.getElementsByTagName("html")[0],"feedback_tab_on");GSFN.gId("fdbk_overlay").style.display="block"},hide:function(){if(GSFN.gId("fdbk_iframe").addEventListener){GSFN.gId("fdbk_iframe").removeEventListener("load",this.loaded,false)
}else{if(GSFN.gId("fdbk_iframe").attachEvent){GSFN.gId("fdbk_iframe").detachEvent("onload",this.loaded)}}GSFN.gId("fdbk_overlay").style.display="none";GSFN.gId("fdbk_iframe").removeAttribute("src");GSFN.gId("fdbk_iframe").className="loading";GSFN.removeClassName(document.getElementsByTagName("html")[0],"feedback_tab_on")},loaded:function(){GSFN.gId("fdbk_iframe").className="loaded"},get_fastpass_url:function(c){if(c.fastpass){return c.fastpass}var e=document.getElementsByTagName("script");var d=0;for(;d<e.length;d++){var b=e[d];var a=/\/fastpass/;if(b.src.match(a&&b.src.match(/oauth/))){return b.src}}}};(function(a2,a0,aZ){function ab(h,f,b){var a=a0.createElement(h);return f&&(a.id=aW+f),b&&(a.style.cssText=b),a2(a)}function aa(e){var d=aD.length,f=(aj+e)%d;return f<0?d+f:f}function aB(d,c){return Math.round((/%/.test(d)?(c==="x"?aC.width():aC.height())/100:1)*parseInt(d,10))}function a5(b){return ap.photo||/\.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(b)}function a6(){var a;ap=a2.extend({},a2.data(ak,aX));for(a in ap){a2.isFunction(ap[a])&&a.slice(0,2)!=="on"&&(ap[a]=ap[a].call(ak))}ap.rel=ap.rel||ak.rel||"nofollow",ap.href=ap.href||a2(ak).attr("href"),ap.title=ap.title||ak.title,typeof ap.href=="string"&&(ap.href=a2.trim(ap.href))}function a4(a,d){a2.event.trigger(a),d&&d.call(ak)}function a3(){var h,f=aW+"Slideshow_",m="click."+aW,l,k,j;ap.slideshow&&aD[1]?(l=function(){av.text(ap.slideshowStop).unbind(m).bind(aS,function(){if(aj<aD.length-1||ap.loop){h=setTimeout(ad.next,ap.slideshowSpeed)}}).bind(aT,function(){clearTimeout(h)}).one(m+" "+aR,k),aK.removeClass(f+"off").addClass(f+"on"),h=setTimeout(ad.next,ap.slideshowSpeed)},k=function(){clearTimeout(h),av.text(ap.slideshowStart).unbind([aS,aT,aR,m].join(" ")).one(m,function(){ad.next(),l()}),aK.removeClass(f+"on").addClass(f+"off")},ap.slideshowAuto?l():k()):aK.removeClass(f+"off "+f+"on")}function a1(a){if(!af){ak=a,a6(),aD=a2(ak),aj=0,ap.rel!=="nofollow"&&(aD=a2("."+aV).filter(function(){var c=a2.data(this,aX).rel||this.rel;return c===ap.rel}),aj=aD.index(ak),aj===-1&&(aD=aD.add(ak),aj=aD.length-1));if(!ah){ah=ag=!0,aK.show();if(ap.returnFocus){try{ak.blur(),a2(ak).one(aQ,function(){try{this.focus()}catch(b){}})}catch(d){}}aL.css({opacity:+ap.opacity,cursor:ap.overlayClose?"pointer":"auto"}).fadeIn(),ap.w=aB(ap.initialWidth,"x"),ap.h=aB(ap.initialHeight,"y"),ad.position(),aN&&aC.bind("resize."+aM+" scroll."+aM,function(){aL.css({width:aC.width(),height:aC.height(),top:aC.scrollTop(),left:aC.scrollLeft()})}).trigger("resize."+aM),a4(aU,ap.onOpen),aq.add(ax).hide(),ar.html(ap.close).show()}ad.load(!0)}}var aY={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:0.9,preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined},aX="colorbox",aW="cbox",aV=aW+"Element",aU=aW+"_open",aT=aW+"_load",aS=aW+"_complete",aR=aW+"_cleanup",aQ=aW+"_closed",aP=aW+"_purge",aO=a2.browser.msie&&!a2.support.opacity,aN=aO&&a2.browser.version<7,aM=aW+"_IE6",aL,aK,aJ,aI,aH,aG,aF,aE,aD,aC,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad,ac="div";ad=a2.fn[aX]=a2[aX]=function(a,e){var d=this;a=a||{},ad.init();if(!d[0]){if(d.selector){return d}d=a2("<a/>"),a.open=!0}return e&&(a.onComplete=e),d.each(function(){a2.data(this,aX,a2.extend({},a2.data(this,aX)||aY,a)),a2(this).addClass(aV)}),(a2.isFunction(a.open)&&a.open.call(d)||a.open)&&a1(d[0]),d},ad.init=function(){if(!aK){if(!a2("body")[0]){a2(ad.init);return}aC=a2(aZ),aK=ab(ac).attr({id:aX,"class":aO?aW+(aN?"IE6":"IE"):""}),aL=ab(ac,"Overlay",aN?"position:absolute":"").hide(),aJ=ab(ac,"Wrapper"),aI=ab(ac,"Content").append(aA=ab(ac,"LoadedContent","width:0; height:0; overflow:hidden"),ay=ab(ac,"LoadingOverlay").add(ab(ac,"LoadingGraphic")),ax=ab(ac,"Title"),aw=ab(ac,"Current"),au=ab(ac,"Next"),at=ab(ac,"Previous"),av=ab(ac,"Slideshow").bind(aU,a3),ar=ab(ac,"Close")),aJ.append(ab(ac).append(ab(ac,"TopLeft"),aH=ab(ac,"TopCenter"),ab(ac,"TopRight")),ab(ac,!1,"clear:left").append(aG=ab(ac,"MiddleLeft"),aI,aF=ab(ac,"MiddleRight")),ab(ac,!1,"clear:left").append(ab(ac,"BottomLeft"),aE=ab(ac,"BottomCenter"),ab(ac,"BottomRight"))).find("div div").css({"float":"left"}),az=ab(ac,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),a2("body").prepend(aL,aK.append(aJ,az)),ao=aH.height()+aE.height()+aI.outerHeight(!0)-aI.height(),an=aG.width()+aF.width()+aI.outerWidth(!0)-aI.width(),am=aA.outerHeight(!0),al=aA.outerWidth(!0),aK.css({"padding-bottom":ao,"padding-right":an}).hide(),au.click(function(){ad.next()}),at.click(function(){ad.prev()}),ar.click(function(){ad.close()}),aq=au.add(at).add(aw).add(av),aL.click(function(){ap.overlayClose&&ad.close()}),a2(a0).bind("keydown."+aW,function(d){var c=d.keyCode;ah&&ap.escKey&&c===27&&(d.preventDefault(),ad.close()),ah&&ap.arrowKey&&aD[1]&&(c===37?(d.preventDefault(),at.click()):c===39&&(d.preventDefault(),au.click()))})}},ad.remove=function(){aK.add(aL).remove(),aK=null,a2("."+aV).removeData(aX).removeClass(aV)},ad.position=function(h,f){function j(b){aH[0].style.width=aE[0].style.width=aI[0].style.width=b.style.width,ay[0].style.height=ay[1].style.height=aI[0].style.height=aG[0].style.height=aF[0].style.height=b.style.height}var m=0,l=0,k=aK.offset();aC.unbind("resize."+aW),aK.css({top:-99999,left:-99999}),ap.fixed&&!aN?aK.css({position:"fixed"}):(m=aC.scrollTop(),l=aC.scrollLeft(),aK.css({position:"absolute"})),ap.right!==!1?l+=Math.max(aC.width()-ap.w-al-an-aB(ap.right,"x"),0):ap.left!==!1?l+=aB(ap.left,"x"):l+=Math.round(Math.max(aC.width()-ap.w-al-an,0)/2),ap.bottom!==!1?m+=Math.max(aC.height()-ap.h-am-ao-aB(ap.bottom,"y"),0):ap.top!==!1?m+=aB(ap.top,"y"):m+=Math.round(Math.max(aC.height()-ap.h-am-ao,0)/2),aK.css({top:k.top,left:k.left}),h=aK.width()===ap.w+al&&aK.height()===ap.h+am?0:h||0,aJ[0].style.width=aJ[0].style.height="9999px",aK.dequeue().animate({width:ap.w+al,height:ap.h+am,top:m,left:l},{duration:h,complete:function(){j(this),ag=!1,aJ[0].style.width=ap.w+al+an+"px",aJ[0].style.height=ap.h+am+ao+"px",f&&f(),setTimeout(function(){aC.bind("resize."+aW,ad.position)},1)},step:function(){j(this)}})},ad.resize=function(b){ah&&(b=b||{},b.width&&(ap.w=aB(b.width,"x")-al-an),b.innerWidth&&(ap.w=aB(b.innerWidth,"x")),aA.css({width:ap.w}),b.height&&(ap.h=aB(b.height,"y")-am-ao),b.innerHeight&&(ap.h=aB(b.innerHeight,"y")),!b.innerHeight&&!b.height&&(aA.css({height:"auto"}),ap.h=aA.height()),aA.css({height:ap.h}),ad.position(ap.transition==="none"?0:ap.speed))},ad.prep=function(a){function f(){return ap.w=ap.w||aA.width(),ap.w=ap.mw&&ap.mw<ap.w?ap.mw:ap.w,ap.w}function e(){return ap.h=ap.h||aA.height(),ap.h=ap.mh&&ap.mh<ap.h?ap.mh:ap.h,ap.h}if(!ah){return}var k,j=ap.transition==="none"?0:ap.speed;aA.remove(),aA=ab(ac,"LoadedContent").append(a),aA.hide().appendTo(az.show()).css({width:f(),overflow:ap.scrolling?"auto":"hidden"}).css({height:e()}).prependTo(aI),az.hide(),a2(ai).css({"float":"none"}),aN&&a2("select").not(aK.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(aR,function(){this.style.visibility="inherit"}),k=function(){function d(){aO&&aK[0].style.removeAttribute("filter")}var y,x,w=aD.length,u,t="frameBorder",s="allowTransparency",r,n,m;if(!ah){return}r=function(){clearTimeout(ae),ay.hide(),a4(aS,ap.onComplete)},aO&&ai&&aA.fadeIn(100),ax.html(ap.title).add(aA).show();if(w>1){typeof ap.current=="string"&&aw.html(ap.current.replace("{current}",aj+1).replace("{total}",w)).show(),au[ap.loop||aj<w-1?"show":"hide"]().html(ap.next),at[ap.loop||aj?"show":"hide"]().html(ap.previous),ap.slideshow&&av.show();
if(ap.preloading){y=[aa(-1),aa(1)];while(x=aD[y.pop()]){n=a2.data(x,aX).href||x.href,a2.isFunction(n)&&(n=n.call(x)),a5(n)&&(m=new Image,m.src=n)}}}else{aq.hide()}ap.iframe?(u=ab("iframe")[0],t in u&&(u[t]=0),s in u&&(u[s]="true"),u.name=aW+ +(new Date),ap.fastIframe?r():a2(u).one("load",r),u.src=ap.href,ap.scrolling||(u.scrolling="no"),a2(u).addClass(aW+"Iframe").appendTo(aA).one(aP,function(){u.src="//about:blank"})):r(),ap.transition==="fade"?aK.fadeTo(j,1,d):d()},ap.transition==="fade"?aK.fadeTo(j,0,function(){ad.position(0,k)}):ad.position(j,k)},ad.load=function(a){var h,g,f=ad.prep;ag=!0,ai=!1,ak=aD[aj],a||a6(),a4(aP),a4(aT,ap.onLoad),ap.h=ap.height?aB(ap.height,"y")-am-ao:ap.innerHeight&&aB(ap.innerHeight,"y"),ap.w=ap.width?aB(ap.width,"x")-al-an:ap.innerWidth&&aB(ap.innerWidth,"x"),ap.mw=ap.w,ap.mh=ap.h,ap.maxWidth&&(ap.mw=aB(ap.maxWidth,"x")-al-an,ap.mw=ap.w&&ap.w<ap.mw?ap.w:ap.mw),ap.maxHeight&&(ap.mh=aB(ap.maxHeight,"y")-am-ao,ap.mh=ap.h&&ap.h<ap.mh?ap.h:ap.mh),h=ap.href,ae=setTimeout(function(){ay.show()},100),ap.inline?(ab(ac).hide().insertBefore(a2(h)[0]).one(aP,function(){a2(this).replaceWith(aA.children())}),f(a2(h))):ap.iframe?f(" "):ap.html?f(ap.html):a5(h)?(a2(ai=new Image).addClass(aW+"Photo").error(function(){ap.title=!1,f(ab(ac,"Error").text("This image could not be loaded"))}).load(function(){var b;ai.onload=null,ap.scalePhotos&&(g=function(){ai.height-=ai.height*b,ai.width-=ai.width*b},ap.mw&&ai.width>ap.mw&&(b=(ai.width-ap.mw)/ai.width,g()),ap.mh&&ai.height>ap.mh&&(b=(ai.height-ap.mh)/ai.height,g())),ap.h&&(ai.style.marginTop=Math.max(ap.h-ai.height,0)/2+"px"),aD[1]&&(aj<aD.length-1||ap.loop)&&(ai.style.cursor="pointer",ai.onclick=function(){ad.next()}),aO&&(ai.style.msInterpolationMode="bicubic"),setTimeout(function(){f(ai)},1)}),setTimeout(function(){ai.src=h},1)):h&&az.load(h,ap.data,function(e,k,j){f(k==="error"?ab(ac,"Error").text("Request unsuccessful: "+j.statusText):a2(this).contents())})},ad.next=function(){!ag&&aD[1]&&(aj<aD.length-1||ap.loop)&&(aj=aa(1),ad.load())},ad.prev=function(){!ag&&aD[1]&&(aj||ap.loop)&&(aj=aa(-1),ad.load())},ad.close=function(){ah&&!af&&(af=!0,ah=!1,a4(aR,ap.onCleanup),aC.unbind("."+aW+" ."+aM),aL.fadeTo(200,0),aK.stop().fadeTo(300,0,function(){aK.add(aL).css({opacity:1,cursor:"auto"}).hide(),a4(aP),aA.remove(),setTimeout(function(){af=!1,a4(aQ,ap.onClosed)},1)}))},ad.element=function(){return a2(ak)},ad.settings=aY,a2("."+aV,a0).live("click",function(b){b.which>1||b.shiftKey||b.altKey||b.metaKey||(b.preventDefault(),a1(this))}),ad.init()})(jQuery,document,this);(function(a){a.extend(a.fn,{validate:function(d){if(this.length){var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(d,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){d=this.find("input, button");d.filter(".cancel").click(function(){c.cancelSubmit=true});c.settings.submitHandler&&d.filter(":submit").click(function(){c.submitButton=this});this.submit(function(f){function b(){if(c.settings.submitHandler){if(c.submitButton){var e=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&e.remove();return false}return true}c.settings.debug&&f.preventDefault();if(c.cancelSubmit){c.cancelSubmit=false;return b()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return b()}else{c.focusInvalid();return false}})}return c}else{d&&d.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")}},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var d=true,c=a(this[0].form).validate();this.each(function(){d&=c.element(this)});return d}},removeAttrs:function(e){var c={},f=this;a.each(e.split(/\s/),function(d,b){c[b]=f.attr(b);f.removeAttr(b)});return c},rules:function(j,c){var o=this[0];if(j){var n=a.data(o.form,"validator").settings,m=n.rules,l=a.validator.staticRules(o);switch(j){case"add":a.extend(l,a.validator.normalizeRule(c));m[o.name]=l;if(c.messages){n.messages[o.name]=a.extend(n.messages[o.name],c.messages)}break;case"remove":if(!c){delete m[o.name];return l}var k={};a.each(c.split(/\s/),function(b,d){k[d]=l[d];delete l[d]});return k}}o=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(o),a.validator.classRules(o),a.validator.attributeRules(o),a.validator.staticRules(o)),o);if(o.required){n=o.required;delete o.required;o=a.extend({required:n},o)}return o}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(d,c){this.settings=a.extend(true,{},a.validator.defaults,d);this.currentForm=c;this.init()};a.validator.format=function(d,c){if(arguments.length==1){return function(){var b=a.makeArray(arguments);b.unshift(d);return a.validator.format.apply(this,b)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(f,b){d=d.replace(RegExp("\\{"+f+"\\}","g"),b)});return d};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b){if(b.name in this.submitted||b==this.lastElement){this.element(b)}},onclick:function(b){if(b.name in this.submitted){this.element(b)}else{b.parentNode.name in this.submitted&&this.element(b.parentNode)}},highlight:function(e,c,f){e.type==="radio"?this.findByName(e.name).addClass(c).removeClass(f):a(e).addClass(c).removeClass(f)},unhighlight:function(e,c,f){e.type==="radio"?this.findByName(e.name).removeClass(c).addClass(f):a(e).removeClass(c).addClass(f)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){function e(h){var d=a.data(this[0].form,"validator"),b="on"+h.type.replace(/^validate/,"");d.settings[b]&&d.settings[b].call(d,this[0],h)}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};a.each(this.settings.groups,function(d,b){a.each(b.split(/\s/),function(k,j){c[j]=d})});var f=this.settings.rules;a.each(f,function(d,b){f[d]=a.validator.normalizeRule(b)});a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e);
this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var d=0,c=this.currentElements=this.elements();c[d];d++){this.check(c[d])}return this.valid()},element:function(d){this.lastElement=d=this.validationTargetFor(this.clean(d));this.prepareElement(d);this.currentElements=a(d);var c=this.check(d);if(c){delete this.invalid[d.name]}else{this.invalid[d.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return c},showErrors:function(d){if(d){a.extend(this.errorMap,d);this.errorList=[];for(var c in d){this.errorList.push({message:d[c],element:this.findByName(c)[0]})}this.successList=a.grep(this.successList,function(b){return !(b.name in d)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var c=0,f;for(f in e){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name==b.name}).length==1&&b},elements:function(){var d=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in c||!d.objectLength(a(this).rules())){return false}return c[this.name]=true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},check:function(j){j=this.validationTargetFor(this.clean(j));var c=a(j).rules(),o=false,n;for(n in c){var m={method:n,parameters:c[n]};try{var l=a.validator.methods[n].call(this,j.value.replace(/\r/g,""),j,m.parameters);if(l=="dependency-mismatch"){o=true}else{o=false;if(l=="pending"){this.toHide=this.toHide.not(this.errorsFor(j));return}if(!l){this.formatAndAdd(j,m);return false}}}catch(k){this.settings.debug&&window.console&&console.log("exception occured when checking element "+j.id+", check the '"+m.method+"' method",k);throw k}}if(!o){this.objectLength(c)&&this.successList.push(j);return true}},customMetaMessage:function(e,c){if(a.metadata){var f=this.settings.meta?a(e).metadata()[this.settings.meta]:a(e).metadata();return f&&f.messages&&f.messages[c]}},customMessage:function(e,c){var f=this.settings.messages[e];return f&&(f.constructor==String?f:f[c])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}},defaultMessage:function(d,c){return this.findDefined(this.customMessage(d.name,c),this.customMetaMessage(d,c),!this.settings.ignoreTitle&&d.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+d.name+"</strong>")},formatAndAdd:function(f,c){var h=this.defaultMessage(f,c.method),g=/\$?\{(\d+)\}/g;if(typeof h=="function"){h=h.call(this,c.parameters,f)}else{if(g.test(h)){h=jQuery.format(h.replace(g,"{$1}"),c.parameters)}}this.errorList.push({message:h,element:f});this.errorMap[f.name]=h;this.submitted[f.name]=h},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){for(var d=0;this.errorList[d];d++){var c=this.errorList[d];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass);this.showLabel(c.element,c.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(d=0;this.successList[d];d++){this.showLabel(this.successList[d])}}if(this.settings.unhighlight){d=0;for(c=this.validElements();c[d];d++){this.settings.unhighlight.call(this,c[d],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(e,c){var f=this.errorsFor(e);if(f.length){f.removeClass(this.settings.validClass).addClass(this.settings.errorClass);f.attr("generated")&&f.html(c)}else{f=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:true}).addClass(this.settings.errorClass).html(c||"");if(this.settings.wrapper){f=f.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}this.labelContainer.append(f).length||(this.settings.errorPlacement?this.settings.errorPlacement(f,a(e)):f.insertAfter(e))}if(!c&&this.settings.success){f.text("");typeof this.settings.success=="string"?f.addClass(this.settings.success):this.settings.success(f)}this.toShow=this.toShow.add(f)},errorsFor:function(d){var c=this.idOrName(d);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(d){var c=this.currentForm;return a(document.getElementsByName(d)).map(function(f,b){return b.form==c&&b.name==d&&b||null})},getLength:function(d,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c)){return this.findByName(c.name).filter(":checked").length}}return d.length},depend:function(d,c){return this.dependTypes[typeof d]?this.dependTypes[typeof d](d,c):true},dependTypes:{"boolean":function(b){return b},string:function(d,c){return !!a(d,c.form).length},"function":function(d,c){return d(c)}},optional:function(b){return !a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(d,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[d.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(d,c){d.constructor==String?this.classRuleSettings[d]=c:a.extend(this.classRuleSettings,d)},classRules:function(d){var c={};
(d=a(d).attr("class"))&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])});return c},attributeRules:function(f){var c={};f=a(f);for(var h in a.validator.methods){var g;if(g=h==="required"&&typeof a.fn.prop==="function"?f.prop(h):f.attr(h)){c[h]=g}else{if(f[0].getAttribute("type")===h){c[h]=true}}}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(d){if(!a.metadata){return{}}var c=a.data(d.form,"validator").settings.meta;return c?a(d).metadata()[c]:a(d).metadata()},staticRules:function(e){var c={},f=a.data(e.form,"validator");if(f.settings.rules){c=a.validator.normalizeRule(f.settings.rules[e.name])||{}}return c},normalizeRules:function(d,c){a.each(d,function(h,g){if(g===false){delete d[h]}else{if(g.param||g.depends){var b=true;switch(typeof g.depends){case"string":b=!!a(g.depends,c.form).length;break;case"function":b=g.depends.call(c,c)}if(b){d[h]=g.param!==undefined?g.param:true}else{delete d[h]}}}});a.each(d,function(f,b){d[f]=a.isFunction(b)?b(c):b});a.each(["minlength","maxlength","min","max"],function(){if(d[this]){d[this]=Number(d[this])}});a.each(["rangelength","range"],function(){if(d[this]){d[this]=[Number(d[this][0]),Number(d[this][1])]}});if(a.validator.autoCreateRanges){if(d.min&&d.max){d.range=[d.min,d.max];delete d.min;delete d.max}if(d.minlength&&d.maxlength){d.rangelength=[d.minlength,d.maxlength];delete d.minlength;delete d.maxlength}}d.messages&&delete d.messages;return d},normalizeRule:function(d){if(typeof d=="string"){var c={};a.each(d.split(/\s/),function(){c[this]=true});d=c}return d},addMethod:function(e,c,f){a.validator.methods[e]=c;a.validator.messages[e]=f!=undefined?f:a.validator.messages[e];c.length<3&&a.validator.addClassRules(e,a.validator.normalizeRule(e))},methods:{required:function(e,c,f){if(!this.depend(f,c)){return"dependency-mismatch"}switch(c.nodeName.toLowerCase()){case"select":return(e=a(c).val())&&e.length>0;case"input":if(this.checkable(c)){return this.getLength(e,c)>0}default:return a.trim(e).length>0}},remote:function(h,c,m){if(this.optional(c)){return"dependency-mismatch"}var l=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});l.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=l.message;m=typeof m=="string"&&{url:m}||m;if(this.pending[c.name]){return"pending"}if(l.old===h){return l.valid}l.old=h;var k=this;this.startRequest(c);var j={};j[c.name]=h;a.ajax(a.extend(true,{url:m,mode:"abort",port:"validate"+c.name,dataType:"json",data:j,success:function(e){k.settings.messages[c.name].remote=l.originalMessage;var b=e===true;if(b){var d=k.formSubmitted;k.prepareElement(c);k.formSubmitted=d;k.successList.push(c);k.showErrors()}else{d={};e=e||k.defaultMessage(c,"remote");d[c.name]=l.message=a.isFunction(e)?e(h):e;k.showErrors(d)}l.valid=b;k.stopRequest(c,b)}},m));return"pending"},minlength:function(e,c,f){return this.optional(c)||this.getLength(a.trim(e),c)>=f},maxlength:function(e,c,f){return this.optional(c)||this.getLength(a.trim(e),c)<=f},rangelength:function(e,c,f){e=this.getLength(a.trim(e),c);return this.optional(c)||e>=f[0]&&e<=f[1]},min:function(e,c,f){return this.optional(c)||e>=f},max:function(e,c,f){return this.optional(c)||e<=f},range:function(e,c,f){return this.optional(c)||e>=f[0]&&e<=f[1]},email:function(d,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(d)},url:function(d,c){return this.optional(c)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(d)},date:function(d,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(d))},dateISO:function(d,c){return this.optional(c)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(d)},number:function(d,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(d)},digits:function(d,c){return this.optional(c)||/^\d+$/.test(d)},creditcard:function(h,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 -]+/.test(h)){return false}var m=0,l=0,k=false;h=h.replace(/\D/g,"");for(var j=h.length-1;j>=0;j--){l=h.charAt(j);l=parseInt(l,10);if(k){if((l*=2)>9){l-=9}}m+=l;k=!k}return m%10==0},accept:function(e,c,f){f=typeof f=="string"?f.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(c)||e.match(RegExp(".("+f+")$","i"))},equalTo:function(e,c,f){f=a(f).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return e==f.val()}}});a.format=a.validator.format})(jQuery);(function(f){var e={};if(f.ajaxPrefilter){f.ajaxPrefilter(function(c,b,a){b=c.port;if(c.mode=="abort"){e[b]&&e[b].abort();e[b]=a}})}else{var d=f.ajax;f.ajax=function(b){var a=("port" in b?b:f.ajaxSettings).port;if(("mode" in b?b:f.ajaxSettings).mode=="abort"){e[a]&&e[a].abort();return e[a]=d.apply(this,arguments)}return d.apply(this,arguments)}}})(jQuery);(function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(e,c){function f(b){b=a.event.fix(b);b.type=c;return a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(e,f,true)},teardown:function(){this.removeEventListener(e,f,true)},handler:function(b){arguments[0]=a.event.fix(b);arguments[0].type=c;return a.event.handle.apply(this,arguments)}}});a.extend(a.fn,{validateDelegate:function(e,c,f){return this.bind(c,function(d){var b=a(d.target);if(b.is(e)){return f.apply(b,arguments)}})}})})(jQuery);(function(g){var h=true;g.fn.truncate=function(j){var k=g.extend({},g.fn.truncate.defaults,j);g(this).each(function(){var n=g.trim(a(g(this).text())).length;if(n<=k.max_length){return}var o=k.max_length-k.more.length-3;var m=e(this,o);var l=g(this).hide();m.insertAfter(l);c(m).append(' … <a href="#more">'+k.more+"</a>");b(l).append(' <a href="#less">'+k.less+"</a>");m.find("a:last").click(function(){m.hide();l.show();return false});l.find("a:last").click(function(){m.show();l.hide();return false
})})};g.fn.truncate.defaults={max_length:100,more:"more",less:"less"};function e(j,k){return(j.nodeType===3)?f(j,k):d(j,k)}function d(n,m){var j=g(n);var l=j.clone().empty();var k;j.contents().each(function(){var o=m-l.text().length;if(o===0){return}k=e(this,o);if(k){l.append(k)}});return l}function f(j,l){var k=a(j.data);if(h){k=k.replace(/^ /,"")}h=!!k.match(/ $/);k=k.slice(0,l);k=g("<div/>").text(k).html();return k}function a(j){return j.replace(/\s+/g," ")}function c(l){var j=g(l);var k=j.children(":last");if(!k){return l}var m=k.css("display");if(!m||m==="inline"){return j}return c(k)}function b(l){var j=g(l);var k=j.children(":last");if(k&&k.is("p")){return k}return l}}(jQuery));(function(a){a.fn.hoverIntent=function(l,k){var m={sensitivity:7,interval:100,timeout:0};m=a.extend(m,k?{over:l,out:k}:l);var o,n,h,d;var e=function(f){o=f.pageX;n=f.pageY};var c=function(){};c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-o)+Math.abs(d-n))<m.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return m.over.apply(f,[g])}else{h=o;d=n;f.hoverIntent_t=setTimeout(function(){c(g,f)},m.interval)}};var j=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return m.out.apply(f,[g])};var b=function(p){var g=jQuery.extend({},p);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(p.type==="mouseenter"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!==1){f.hoverIntent_t=setTimeout(function(){c(g,f)},m.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s===1){f.hoverIntent_t=setTimeout(function(){j(g,f)},m.timeout)}}};return this.bind("mouseenter",b).bind("mouseleave",b)}}(jQuery));(function(d,c){$window=d(c),d.fn.lazyload=function(h){function a(){var e=0;g.each(function(){var f=d(this);if(b.skip_invisible&&!f.is(":visible")){return}if(!d.abovethetop(this,b)&&!d.leftofbegin(this,b)){if(!d.belowthefold(this,b)&&!d.rightoffold(this,b)){f.trigger("appear")}else{if(++e>b.failure_limit){return !1}}}})}var g=this,b={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:c,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return h&&(undefined!==h.failurelimit&&(h.failure_limit=h.failurelimit,delete h.failurelimit),undefined!==h.effectspeed&&(h.effect_speed=h.effectspeed,delete h.effectspeed),d.extend(b,h)),$container=b.container===undefined||b.container===c?$window:d(b.container),0===b.event.indexOf("scroll")&&$container.bind(b.event,function(e){return a()}),this.each(function(){var e=this,f=d(e);e.loaded=!1,f.one("appear",function(){if(!this.loaded){if(b.appear){var j=g.length;b.appear.call(e,j,b)}d("<img />").bind("load",function(){f.hide().attr("src",f.data(b.data_attribute))[b.effect](b.effect_speed),e.loaded=!0;var l=d.grep(g,function(m){return !m.loaded});g=d(l);if(b.load){var k=g.length;b.load.call(e,k,b)}}).attr("src",f.data(b.data_attribute))}}),0!==b.event.indexOf("scroll")&&f.bind(b.event,function(j){e.loaded||f.trigger("appear")})}),$window.bind("resize",function(e){a()}),a(),this},d.belowthefold=function(f,b){var a;return b.container===undefined||b.container===c?a=$window.height()+$window.scrollTop():a=$container.offset().top+$container.height(),a<=d(f).offset().top-b.threshold},d.rightoffold=function(f,b){var a;return b.container===undefined||b.container===c?a=$window.width()+$window.scrollLeft():a=$container.offset().left+$container.width(),a<=d(f).offset().left-b.threshold},d.abovethetop=function(f,b){var a;return b.container===undefined||b.container===c?a=$window.scrollTop():a=$container.offset().top,a>=d(f).offset().top+b.threshold+d(f).height()},d.leftofbegin=function(f,b){var a;return b.container===undefined||b.container===c?a=$window.scrollLeft():a=$container.offset().left,a>=d(f).offset().left+b.threshold+d(f).width()},d.inviewport=function(a,e){return !d.rightofscreen(a,e)&&!d.leftofscreen(a,e)&&!d.belowthefold(a,e)&&!d.abovethetop(a,e)},d.extend(d.expr[":"],{"below-the-fold":function(a){return d.belowthefold(a,{threshold:0,container:c})},"above-the-top":function(a){return !d.belowthefold(a,{threshold:0,container:c})},"right-of-screen":function(a){return d.rightoffold(a,{threshold:0,container:c})},"left-of-screen":function(a){return !d.rightoffold(a,{threshold:0,container:c})},"in-viewport":function(a){return !d.inviewport(a,{threshold:0,container:c})},"above-the-fold":function(a){return !d.belowthefold(a,{threshold:0,container:c})},"right-of-fold":function(a){return d.rightoffold(a,{threshold:0,container:c})},"left-of-fold":function(a){return !d.rightoffold(a,{threshold:0,container:c})}})})(jQuery,window);$.fn.passwordStrength=function(a){function c(j){var d=(j.length);if(d>5){d=5}var l=j.replace(/[0-9]/g,"");var k=(j.length-l.length);if(k>3){k=3}var g=j.replace(/\W/g,"");var e=(j.length-g.length);if(e>3){e=3}var f=j.replace(/[A-Z]/g,"");var h=(j.length-f.length);if(h>3){h=3}var m=((d*10)-20)+(k*10)+(e*15)+(h*10);if(m<0){m=0}if(m>100){m=100}return m}function b(){var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$_+";var f=10;var e=1;var d="";while(e<=f){$max=g.length-1;$num=Math.floor(Math.random()*$max);$temp=g.substr($num,1);d+=$temp;e++}return d}return this.each(function(){var d=this;d.opts={};d.opts=$.extend({},$.fn.passwordStrength.defaults,a);d.div=$(d.opts.targetDiv);d.defaultClass=d.div.attr("class");d.percents=(d.opts.classes.length)?100/d.opts.classes.length:100;v=$(this).keyup(function(){if(typeof el==="undefined"){this.el=$(this)}var f=c(this.value);var g=this.percents;var e=Math.floor(f/g);if(100<=f){e=this.opts.classes.length-1}this.div.removeAttr("class").addClass(this.defaultClass).addClass(this.opts.classes[e])})})};$.fn.passwordStrength.defaults={classes:["is10 bad","is20 bad","is30 weak","is40 weak","is50 weak","is60 good","is70 good","is80 good","is90 good","is100 good"],targetDiv:"#password-strength",cache:{}};(function(a){a.cookie=function(g,f,k){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(f))||f===null||f===undefined)){k=a.extend({},k);if(f===null||f===undefined){k.expires=-1}if(typeof k.expires==="number"){var h=k.expires,j=k.expires=new Date();j.setDate(j.getDate()+h)}f=String(f);return(document.cookie=[encodeURIComponent(g),"=",k.raw?f:encodeURIComponent(f),k.expires?"; expires="+k.expires.toUTCString():"",k.path?"; path="+k.path:"",k.domain?"; domain="+k.domain:"",k.secure?"; secure":""].join(""))}k=f||{};var b=k.raw?function(l){return l}:decodeURIComponent;var c=document.cookie.split("; ");var e,d;for(e=0,d;c[e];e++){d=c[e].split("=");if(b(d[0])===g){return b(d[1]||"")}}return null}}(jQuery));(function(c){c.color={};c.color.make=function(j,h,a,b){var k={};k.r=j||0;k.g=h||0;k.b=a||0;k.a=b!=null?b:1;k.add=function(g,f){for(var e=0;e<g.length;++e){k[g.charAt(e)]+=f}return k.normalize()};k.scale=function(g,f){for(var e=0;e<g.length;++e){k[g.charAt(e)]*=f}return k.normalize()};k.toString=function(){if(k.a>=1){return"rgb("+[k.r,k.g,k.b].join(",")+")"}else{return"rgba("+[k.r,k.g,k.b,k.a].join(",")+")"}};k.normalize=function(){function e(g,m,f){return m<g?g:(m>f?f:m)}k.r=e(0,parseInt(k.r),255);k.g=e(0,parseInt(k.g),255);k.b=e(0,parseInt(k.b),255);k.a=e(0,k.a,1);return k};k.clone=function(){return c.color.make(k.r,k.b,k.g,k.a)};return k.normalize()};c.color.extract=function(b,a){var f;do{f=b.css(a).toLowerCase();if(f!=""&&f!="transparent"){break}b=b.parent()}while(!c.nodeName(b.get(0),"body"));if(f=="rgba(0, 0, 0, 0)"){f="transparent"}return c.color.parse(f)};c.color.parse=function(h){var g,a=c.color.make;if(g=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(h)){return a(parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10))}if(g=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(h)){return a(parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10),parseFloat(g[4]))}if(g=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(h)){return a(parseFloat(g[1])*2.55,parseFloat(g[2])*2.55,parseFloat(g[3])*2.55)
}if(g=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(h)){return a(parseFloat(g[1])*2.55,parseFloat(g[2])*2.55,parseFloat(g[3])*2.55,parseFloat(g[4]))}if(g=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(h)){return a(parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16))}if(g=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(h)){return a(parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16))}var b=c.trim(h).toLowerCase();if(b=="transparent"){return a(255,255,255,0)}else{g=d[b]||[0,0,0];return a(g[0],g[1],g[2])}};var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function(f){function d(bk,bA,ba,bD){var a3=[],a5={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},bc=null,bF=null,b=null,be=null,bq=null,aI=[],bi=[],aH={left:0,right:0,top:0,bottom:0},bf=0,bb=0,aP=0,aB=0,by={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},bs=this;bs.setData=bz;bs.setupGrid=aE;bs.draw=aX;bs.getPlaceholder=function(){return bk};bs.getCanvas=function(){return bc};bs.getPlotOffset=function(){return aH};bs.width=function(){return aP};bs.height=function(){return aB};bs.offset=function(){var g=b.offset();g.left+=aH.left;g.top+=aH.top;return g};bs.getData=function(){return a3};bs.getAxes=function(){var g={},h;f.each(aI.concat(bi),function(k,j){if(j){g[j.direction+(j.n!=1?j.n:"")+"axis"]=j}});return g};bs.getXAxes=function(){return aI};bs.getYAxes=function(){return bi};bs.c2p=bn;bs.p2c=br;bs.getOptions=function(){return a5};bs.highlight=c;bs.unhighlight=a0;bs.triggerRedrawOverlay=aR;bs.pointOffset=function(g){return{left:parseInt(aI[bJ(g,"x")-1].p2c(+g.x)+aH.left),top:parseInt(bi[bJ(g,"y")-1].p2c(+g.y)+aH.top)}};bs.shutdown=bC;bs.resize=function(){bp();aQ(bc);aQ(bF)};bs.hooks=by;bh(bs);aU(ba);aW();bz(bA);aE();aX();bB();function bv(g,j){j=[bs].concat(j);for(var h=0;h<g.length;++h){g[h].apply(this,j)}}function bh(){for(var h=0;h<bD.length;++h){var g=bD[h];g.init(bs);if(g.options){f.extend(true,a5,g.options)}}}function aU(h){var j;f.extend(true,a5,h);if(a5.xaxis.color==null){a5.xaxis.color=a5.grid.color}if(a5.yaxis.color==null){a5.yaxis.color=a5.grid.color}if(a5.xaxis.tickColor==null){a5.xaxis.tickColor=a5.grid.tickColor}if(a5.yaxis.tickColor==null){a5.yaxis.tickColor=a5.grid.tickColor}if(a5.grid.borderColor==null){a5.grid.borderColor=a5.grid.color}if(a5.grid.tickColor==null){a5.grid.tickColor=f.color.parse(a5.grid.color).scale("a",0.22).toString()}for(j=0;j<Math.max(1,a5.xaxes.length);++j){a5.xaxes[j]=f.extend(true,{},a5.xaxis,a5.xaxes[j])}for(j=0;j<Math.max(1,a5.yaxes.length);++j){a5.yaxes[j]=f.extend(true,{},a5.yaxis,a5.yaxes[j])}if(a5.xaxis.noTicks&&a5.xaxis.ticks==null){a5.xaxis.ticks=a5.xaxis.noTicks}if(a5.yaxis.noTicks&&a5.yaxis.ticks==null){a5.yaxis.ticks=a5.yaxis.noTicks}if(a5.x2axis){a5.xaxes[1]=f.extend(true,{},a5.xaxis,a5.x2axis);a5.xaxes[1].position="top"}if(a5.y2axis){a5.yaxes[1]=f.extend(true,{},a5.yaxis,a5.y2axis);a5.yaxes[1].position="right"}if(a5.grid.coloredAreas){a5.grid.markings=a5.grid.coloredAreas}if(a5.grid.coloredAreasColor){a5.grid.markingsColor=a5.grid.coloredAreasColor}if(a5.lines){f.extend(true,a5.series.lines,a5.lines)}if(a5.points){f.extend(true,a5.series.points,a5.points)}if(a5.bars){f.extend(true,a5.series.bars,a5.bars)}if(a5.shadowSize!=null){a5.series.shadowSize=a5.shadowSize}for(j=0;j<a5.xaxes.length;++j){aY(aI,j+1).options=a5.xaxes[j]}for(j=0;j<a5.yaxes.length;++j){aY(bi,j+1).options=a5.yaxes[j]}for(var g in by){if(a5.hooks[g]&&a5.hooks[g].length){by[g]=by[g].concat(a5.hooks[g])}}bv(by.processOptions,[a5])}function bz(g){a3=aV(g);bg();a()}function aV(g){var j=[];for(var k=0;k<g.length;++k){var h=f.extend(true,{},a5.series);if(g[k].data!=null){h.data=g[k].data;delete g[k].data;f.extend(true,h,g[k]);g[k].data=h.data}else{h.data=g[k]}j.push(h)}return j}function bJ(h,g){var j=h[g+"axis"];if(typeof j=="object"){j=j.n}if(typeof j!="number"){j=1}return j}function aL(){return f.grep(aI.concat(bi),function(g){return g})}function bn(g){var j={},k,h;for(k=0;k<aI.length;++k){h=aI[k];if(h&&h.used){j["x"+h.n]=h.c2p(g.left)}}for(k=0;k<bi.length;++k){h=bi[k];if(h&&h.used){j["y"+h.n]=h.c2p(g.top)}}if(j.x1!==undefined){j.x=j.x1}if(j.y1!==undefined){j.y=j.y1}return j}function br(g){var j={},k,h,l;for(k=0;k<aI.length;++k){h=aI[k];if(h&&h.used){l="x"+h.n;if(g[l]==null&&h.n==1){l="x"}if(g[l]!=null){j.left=h.p2c(g[l]);break}}}for(k=0;k<bi.length;++k){h=bi[k];if(h&&h.used){l="y"+h.n;if(g[l]==null&&h.n==1){l="y"}if(g[l]!=null){j.top=h.p2c(g[l]);break}}}return j}function aY(g,h){if(!g[h-1]){g[h-1]={n:h,direction:g==aI?"x":"y",options:f.extend(true,{},g==aI?a5.xaxis:a5.yaxis)}}return g[h-1]}function bg(){var k;var r=a3.length,p=[],m=[];for(k=0;k<a3.length;++k){var g=a3[k].color;if(g!=null){--r;if(typeof g=="number"){m.push(g)}else{p.push(f.color.parse(a3[k].color))}}}for(k=0;k<m.length;++k){r=Math.max(r,m[k]+1)}var o=[],l=0;k=0;while(o.length<r){var h;if(a5.colors.length==k){h=f.color.make(100,100,100)}else{h=f.color.parse(a5.colors[k])}var n=l%2==1?-1:1;h.scale("rgb",1+n*Math.ceil(l/2)*0.2);o.push(h);++k;if(k>=a5.colors.length){k=0;++l}}var j=0,q;for(k=0;k<a3.length;++k){q=a3[k];if(q.color==null){q.color=o[j].toString();++j}else{if(typeof q.color=="number"){q.color=o[q.color].toString()}}if(q.lines.show==null){var s,t=true;for(s in q){if(q[s]&&q[s].show){t=false;break}}if(t){q.lines.show=true}}q.xaxis=aY(aI,bJ(q,"x"));q.yaxis=aY(bi,bJ(q,"y"))}}function a(){var s=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY,G=Number.MAX_VALUE,m,o,p,t,E,y,n,r,A,B,F,H,j,w;function C(K,I,J){if(I<K.datamin&&I!=-G){K.datamin=I}if(J>K.datamax&&J!=G){K.datamax=J}}f.each(aL(),function(J,I){I.datamin=s;I.datamax=z;I.used=false});for(m=0;m<a3.length;++m){y=a3[m];y.datapoints={points:[]};bv(by.processRawData,[y,y.data,y.datapoints])}for(m=0;m<a3.length;++m){y=a3[m];var g=y.data,k=y.datapoints.format;if(!k){k=[];k.push({x:true,number:true,required:true});
k.push({y:true,number:true,required:true});if(y.bars.show||(y.lines.show&&y.lines.fill)){k.push({y:true,number:true,required:false,defaultValue:0});if(y.bars.horizontal){delete k[k.length-1].y;k[k.length-1].x=true}}y.datapoints.format=k}if(y.datapoints.pointsize!=null){continue}y.datapoints.pointsize=k.length;r=y.datapoints.pointsize;n=y.datapoints.points;insertSteps=y.lines.show&&y.lines.steps;y.xaxis.used=y.yaxis.used=true;for(o=p=0;o<g.length;++o,p+=r){w=g[o];var D=w==null;if(!D){for(t=0;t<r;++t){H=w[t];j=k[t];if(j){if(j.number&&H!=null){H=+H;if(isNaN(H)){H=null}else{if(H==Infinity){H=G}else{if(H==-Infinity){H=-G}}}}if(H==null){if(j.required){D=true}if(j.defaultValue!=null){H=j.defaultValue}}}n[p+t]=H}}if(D){for(t=0;t<r;++t){H=n[p+t];if(H!=null){j=k[t];if(j.x){C(y.xaxis,H,H)}if(j.y){C(y.yaxis,H,H)}}n[p+t]=null}}else{if(insertSteps&&p>0&&n[p-r]!=null&&n[p-r]!=n[p]&&n[p-r+1]!=n[p+1]){for(t=0;t<r;++t){n[p+r+t]=n[p+t]}n[p+1]=n[p-r+1];p+=r}}}}for(m=0;m<a3.length;++m){y=a3[m];bv(by.processDatapoints,[y,y.datapoints])}for(m=0;m<a3.length;++m){y=a3[m];n=y.datapoints.points,r=y.datapoints.pointsize;var x=s,q=s,u=z,l=z;for(o=0;o<n.length;o+=r){if(n[o]==null){continue}for(t=0;t<r;++t){H=n[o+t];j=k[t];if(!j||H==G||H==-G){continue}if(j.x){if(H<x){x=H}if(H>u){u=H}}if(j.y){if(H<q){q=H}if(H>l){l=H}}}}if(y.bars.show){var h=y.bars.align=="left"?0:-y.bars.barWidth/2;if(y.bars.horizontal){q+=h;l+=h+y.bars.barWidth}else{x+=h;u+=h+y.bars.barWidth}}C(y.xaxis,x,u);C(y.yaxis,q,l)}f.each(aL(),function(J,I){if(I.datamin==s){I.datamin=null}if(I.datamax==z){I.datamax=null}})}function aO(j,h){var g=document.createElement("canvas");g.className=h;g.width=bf;g.height=bb;if(!j){f(g).css({position:"absolute",left:0,top:0})}f(g).appendTo(bk);if(!g.getContext){g=window.G_vmlCanvasManager.initElement(g)}g.getContext("2d").save();return g}function bp(){bf=bk.width();bb=bk.height();if(bf<=0||bb<=0){throw"Invalid dimensions for plot, width = "+bf+", height = "+bb}}function aQ(g){if(g.width!=bf){g.width=bf}if(g.height!=bb){g.height=bb}var h=g.getContext("2d");h.restore();h.save()}function aW(){var h,j=bk.children("canvas.base"),g=bk.children("canvas.overlay");if(j.length==0||g==0){bk.html("");bk.css({padding:0});if(bk.css("position")=="static"){bk.css("position","relative")}bp();bc=aO(true,"base");bF=aO(false,"overlay");h=false}else{bc=j.get(0);bF=g.get(0);h=true}be=bc.getContext("2d");bq=bF.getContext("2d");b=f([bF,bc]);if(h){bk.data("plot").shutdown();bs.resize();bq.clearRect(0,0,bf,bb);b.unbind();bk.children().not([bc,bF]).remove()}bk.data("plot",bs)}function bB(){if(a5.grid.hoverable){b.mousemove(bI);b.mouseleave(aM)}if(a5.grid.clickable){b.click(a2)}bv(by.bindEvents,[b])}function bC(){if(a7){clearTimeout(a7)}b.unbind("mousemove",bI);b.unbind("mouseleave",aM);b.unbind("click",a2);bv(by.shutdown,[b])}function aG(g){function l(n){return n}var h,m,k=g.options.transform||l,j=g.options.inverseTransform;if(g.direction=="x"){h=g.scale=aP/Math.abs(k(g.max)-k(g.min));m=Math.min(k(g.max),k(g.min))}else{h=g.scale=aB/Math.abs(k(g.max)-k(g.min));h=-h;m=Math.max(k(g.max),k(g.min))}if(k==l){g.p2c=function(n){return(n-m)*h}}else{g.p2c=function(n){return(k(n)-m)*h}}if(!j){g.c2p=function(n){return m+n/h}}else{g.c2p=function(n){return j(m+n/h)}}}function a8(n){var p=n.options,l,g=n.ticks||[],h=[],m,q=p.labelWidth,k=p.labelHeight,o;function j(r,s){return f('<div style="position:absolute;top:-10000px;'+s+'font-size:smaller"><div class="'+n.direction+"Axis "+n.direction+n.n+'Axis">'+r.join("")+"</div></div>").appendTo(bk)}if(n.direction=="x"){if(q==null){q=Math.floor(bf/(g.length>0?g.length:1))}if(k==null){h=[];for(l=0;l<g.length;++l){m=g[l].label;if(m){h.push('<div class="tickLabel" style="float:left;width:'+q+'px">'+m+"</div>")}}if(h.length>0){h.push('<div style="clear:left"></div>');o=j(h,"width:10000px;");k=o.height();o.remove()}}}else{if(q==null||k==null){for(l=0;l<g.length;++l){m=g[l].label;if(m){h.push('<div class="tickLabel">'+m+"</div>")}}if(h.length>0){o=j(h,"");if(q==null){q=o.children().width()}if(k==null){k=o.find("div.tickLabel").height()}o.remove()}}}if(q==null){q=0}if(k==null){k=0}n.labelWidth=q;n.labelHeight=k}function bm(n){var o=n.labelWidth,r=n.labelHeight,j=n.options.position,l=n.options.tickLength,k=a5.grid.axisMargin,g=a5.grid.labelMargin,s=n.direction=="x"?aI:bi,m;var p=f.grep(s,function(t){return t&&t.options.position==j&&t.reserveSpace});if(f.inArray(n,p)==p.length-1){k=0}if(l==null){l="full"}var h=f.grep(s,function(t){return t&&t.reserveSpace});var q=f.inArray(n,h)==0;if(!q&&l=="full"){l=5}if(!isNaN(+l)){g+=+l}if(n.direction=="x"){r+=g;if(j=="bottom"){aH.bottom+=r+k;n.box={top:bb-aH.bottom,height:r}}else{n.box={top:aH.top+k,height:r};aH.top+=r+k}}else{o+=g;if(j=="left"){n.box={left:aH.left+k,width:o};aH.left+=o+k}else{aH.right+=o+k;n.box={left:bf-aH.right,width:o}}}n.position=j;n.tickLength=l;n.box.padding=g;n.innermost=q}function aZ(g){if(g.direction=="x"){g.box.left=aH.left;g.box.width=aP}else{g.box.top=aH.top;g.box.height=aB}}function aE(){var j,g=aL();f.each(g,function(m,l){l.show=l.options.show;if(l.show==null){l.show=l.used}l.reserveSpace=l.show||l.options.reserveSpace;aK(l)});allocatedAxes=f.grep(g,function(l){return l.reserveSpace});aH.left=aH.right=aH.top=aH.bottom=0;if(a5.grid.show){f.each(allocatedAxes,function(m,l){a1(l);a4(l);bt(l,l.ticks);a8(l)});for(j=allocatedAxes.length-1;j>=0;--j){bm(allocatedAxes[j])}var h=a5.grid.minBorderMargin;if(h==null){h=0;for(j=0;j<a3.length;++j){h=Math.max(h,a3[j].points.radius+a3[j].points.lineWidth/2)}}for(var k in aH){aH[k]+=a5.grid.borderWidth;aH[k]=Math.max(h,aH[k])}}aP=bf-aH.left-aH.right;aB=bb-aH.bottom-aH.top;f.each(g,function(m,l){aG(l)});if(a5.grid.show){f.each(allocatedAxes,function(m,l){aZ(l)});aN()}aJ()}function aK(k){var j=k.options,l=+(j.min!=null?j.min:k.datamin),n=+(j.max!=null?j.max:k.datamax),g=n-l;if(g==0){var m=n==0?1:0.01;if(j.min==null){l-=m}if(j.max==null||j.min!=null){n+=m}}else{var h=j.autoscaleMargin;if(h!=null){if(j.min==null){l-=g*h;if(l<0&&k.datamin!=null&&k.datamin>=0){l=0}}if(j.max==null){n+=g*h;if(n>0&&k.datamax!=null&&k.datamax<=0){n=0}}}}k.min=l;k.max=n}function a1(w){var p=w.options;var u;if(typeof p.ticks=="number"&&p.ticks>0){u=p.ticks}else{u=0.3*Math.sqrt(w.direction=="x"?bf:bb)}var h=(w.max-w.min)/u,n,B,o,k,j,l,t;if(p.mode=="time"){var s={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var A=0;if(p.minTickSize!=null){if(typeof p.tickSize=="number"){A=p.tickSize}else{A=p.minTickSize[0]*s[p.minTickSize[1]]}}for(var j=0;j<r.length-1;++j){if(h<(r[j][0]*s[r[j][1]]+r[j+1][0]*s[r[j+1][1]])/2&&r[j][0]*s[r[j][1]]>=A){break}}n=r[j][0];o=r[j][1];if(o=="year"){l=Math.pow(10,Math.floor(Math.log(h/s.year)/Math.LN10));t=(h/s.year)/l;if(t<1.5){n=1}else{if(t<3){n=2}else{if(t<7.5){n=5}else{n=10}}}n*=l}w.tickSize=p.tickSize||[n,o];B=function(I){var D=[],F=I.tickSize[0],C=I.tickSize[1],E=new Date(I.min);var J=F*s[C];if(C=="second"){E.setUTCSeconds(e(E.getUTCSeconds(),F))}if(C=="minute"){E.setUTCMinutes(e(E.getUTCMinutes(),F))}if(C=="hour"){E.setUTCHours(e(E.getUTCHours(),F))}if(C=="month"){E.setUTCMonth(e(E.getUTCMonth(),F))}if(C=="year"){E.setUTCFullYear(e(E.getUTCFullYear(),F))}E.setUTCMilliseconds(0);if(J>=s.minute){E.setUTCSeconds(0)}if(J>=s.hour){E.setUTCMinutes(0)}if(J>=s.day){E.setUTCHours(0)}if(J>=s.day*4){E.setUTCDate(1)}if(J>=s.year){E.setUTCMonth(0)}var L=0,M=Number.NaN,H;do{H=M;M=E.getTime();D.push(M);if(C=="month"){if(F<1){E.setUTCDate(1);var K=E.getTime();E.setUTCMonth(E.getUTCMonth()+1);var G=E.getTime();E.setTime(M+L*s.hour+(G-K)*F);L=E.getUTCHours();E.setUTCHours(0)}else{E.setUTCMonth(E.getUTCMonth()+F)}}else{if(C=="year"){E.setUTCFullYear(E.getUTCFullYear()+F)
}else{E.setTime(M+J)}}}while(M<I.max&&M!=H);return D};k=function(H,E){var C=new Date(H);if(p.timeformat!=null){return f.plot.formatDate(C,p.timeformat,p.monthNames)}var G=E.tickSize[0]*s[E.tickSize[1]];var F=E.max-E.min;var D=(p.twelveHourClock)?" %p":"";if(G<s.minute){fmt="%h:%M:%S"+D}else{if(G<s.day){if(F<2*s.day){fmt="%h:%M"+D}else{fmt="%b %d %h:%M"+D}}else{if(G<s.month){fmt="%b %d"}else{if(G<s.year){if(F<s.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return f.plot.formatDate(C,fmt,p.monthNames)}}else{var g=p.tickDecimals;var m=-Math.floor(Math.log(h)/Math.LN10);if(g!=null&&m>g){m=g}l=Math.pow(10,-m);t=h/l;if(t<1.5){n=1}else{if(t<3){n=2;if(t>2.25&&(g==null||m+1<=g)){n=2.5;++m}}else{if(t<7.5){n=5}else{n=10}}}n*=l;if(p.minTickSize!=null&&n<p.minTickSize){n=p.minTickSize}w.tickDecimals=Math.max(0,g!=null?g:m);w.tickSize=p.tickSize||n;B=function(F){var D=[];var C=e(F.min,F.tickSize),G=0,H=Number.NaN,E;do{E=H;H=C+G*F.tickSize;D.push(H);++G}while(H<F.max&&H!=E);return D};k=function(D,C){return D.toFixed(C.tickDecimals)}}if(p.alignTicksWithAxis!=null){var x=(w.direction=="x"?aI:bi)[p.alignTicksWithAxis-1];if(x&&x.used&&x!=w){var q=B(w);if(q.length>0){if(p.min==null){w.min=Math.min(w.min,q[0])}if(p.max==null&&q.length>1){w.max=Math.max(w.max,q[q.length-1])}}B=function(D){var C=[],F,E;for(E=0;E<x.ticks.length;++E){F=(x.ticks[E].v-x.min)/(x.max-x.min);F=D.min+F*(D.max-D.min);C.push(F)}return C};if(w.mode!="time"&&p.tickDecimals==null){var y=Math.max(0,-Math.floor(Math.log(h)/Math.LN10)+1),z=B(w);if(!(z.length>1&&/\..*0$/.test((z[1]-z[0]).toFixed(y)))){w.tickDecimals=y}}}}w.tickGenerator=B;if(f.isFunction(p.tickFormatter)){w.tickFormatter=function(D,C){return""+p.tickFormatter(D,C)}}else{w.tickFormatter=k}}function a4(j){var g=j.options.ticks,h=[];if(g==null||(typeof g=="number"&&g>0)){h=j.tickGenerator(j)}else{if(g){if(f.isFunction(g)){h=g({min:j.min,max:j.max})}else{h=g}}}var k,n;j.ticks=[];for(k=0;k<h.length;++k){var m=null;var l=h[k];if(typeof l=="object"){n=+l[0];if(l.length>1){m=l[1]}}else{n=+l}if(m==null){m=j.tickFormatter(n,j)}if(!isNaN(n)){j.ticks.push({v:n,label:m})}}}function bt(h,g){if(h.options.autoscaleMargin&&g.length>0){if(h.options.min==null){h.min=Math.min(h.min,g[0].v)}if(h.options.max==null&&g.length>1){h.max=Math.max(h.max,g[g.length-1].v)}}}function aX(){be.clearRect(0,0,bf,bb);var g=a5.grid;if(g.show&&g.backgroundColor){a6()}if(g.show&&!g.aboveData){bG()}for(var h=0;h<a3.length;++h){bv(by.drawSeries,[be,a3[h]]);aT(a3[h])}bv(by.draw,[be]);if(g.show&&g.aboveData){bG()}}function bl(n,o){var k,g,h,l,j=aL();for(i=0;i<j.length;++i){k=j[i];if(k.direction==o){l=o+k.n+"axis";if(!n[l]&&k.n==1){l=o+"axis"}if(n[l]){g=n[l].from;h=n[l].to;break}}}if(!n[l]){k=o=="x"?aI[0]:bi[0];g=n[o+"1"];h=n[o+"2"]}if(g!=null&&h!=null&&g>h){var m=g;g=h;h=m}return{from:g,to:h,axis:k}}function a6(){be.save();be.translate(aH.left,aH.top);be.fillStyle=bw(a5.grid.backgroundColor,aB,0,"rgba(255, 255, 255, 0)");be.fillRect(0,0,aP,aB);be.restore()}function bG(){var l;be.save();be.translate(aH.left,aH.top);var j=a5.grid.markings;if(j){if(f.isFunction(j)){var x=bs.getAxes();x.xmin=x.xaxis.min;x.xmax=x.xaxis.max;x.ymin=x.yaxis.min;x.ymax=x.yaxis.max;j=j(x)}for(l=0;l<j.length;++l){var n=j[l],o=bl(n,"x"),h=bl(n,"y");if(o.from==null){o.from=o.axis.min}if(o.to==null){o.to=o.axis.max}if(h.from==null){h.from=h.axis.min}if(h.to==null){h.to=h.axis.max}if(o.to<o.axis.min||o.from>o.axis.max||h.to<h.axis.min||h.from>h.axis.max){continue}o.from=Math.max(o.from,o.axis.min);o.to=Math.min(o.to,o.axis.max);h.from=Math.max(h.from,h.axis.min);h.to=Math.min(h.to,h.axis.max);if(o.from==o.to&&h.from==h.to){continue}o.from=o.axis.p2c(o.from);o.to=o.axis.p2c(o.to);h.from=h.axis.p2c(h.from);h.to=h.axis.p2c(h.to);if(o.from==o.to||h.from==h.to){be.beginPath();be.strokeStyle=n.color||a5.grid.markingsColor;be.lineWidth=n.lineWidth||a5.grid.markingsLineWidth;be.moveTo(o.from,h.from);be.lineTo(o.to,h.to);be.stroke()}else{be.fillStyle=n.color||a5.grid.markingsColor;be.fillRect(o.from,h.to,o.to-o.from,h.from-h.to)}}}var x=aL(),u=a5.grid.borderWidth;for(var m=0;m<x.length;++m){var p=x[m],k=p.box,q=p.tickLength,t,w,r,g;if(!p.show||p.ticks.length==0){continue}be.strokeStyle=p.options.tickColor||f.color.parse(p.options.color).scale("a",0.22).toString();be.lineWidth=1;if(p.direction=="x"){t=0;if(q=="full"){w=(p.position=="top"?0:aB)}else{w=k.top-aH.top+(p.position=="top"?k.height:0)}}else{w=0;if(q=="full"){t=(p.position=="left"?0:aP)}else{t=k.left-aH.left+(p.position=="left"?k.width:0)}}if(!p.innermost){be.beginPath();r=g=0;if(p.direction=="x"){r=aP}else{g=aB}if(be.lineWidth==1){t=Math.floor(t)+0.5;w=Math.floor(w)+0.5}be.moveTo(t,w);be.lineTo(t+r,w+g);be.stroke()}be.beginPath();for(l=0;l<p.ticks.length;++l){var s=p.ticks[l].v;r=g=0;if(s<p.min||s>p.max||(q=="full"&&u>0&&(s==p.min||s==p.max))){continue}if(p.direction=="x"){t=p.p2c(s);g=q=="full"?-aB:q;if(p.position=="top"){g=-g}}else{w=p.p2c(s);r=q=="full"?-aP:q;if(p.position=="left"){r=-r}}if(be.lineWidth==1){if(p.direction=="x"){t=Math.floor(t)+0.5}else{w=Math.floor(w)+0.5}}be.moveTo(t,w);be.lineTo(t+r,w+g)}be.stroke()}if(u){be.lineWidth=u;be.strokeStyle=a5.grid.borderColor;be.strokeRect(-u/2,-u/2,aP+u,aB+u)}be.restore()}function aN(){bk.find(".tickLabels").remove();var k=['<div class="tickLabels" style="font-size:smaller">'];var g=aL();for(var n=0;n<g.length;++n){var o=g[n],l=o.box;if(!o.show){continue}k.push('<div class="'+o.direction+"Axis "+o.direction+o.n+'Axis" style="color:'+o.options.color+'">');for(var m=0;m<o.ticks.length;++m){var j=o.ticks[m];if(!j.label||j.v<o.min||j.v>o.max){continue}var r={},h;if(o.direction=="x"){h="center";r.left=Math.round(aH.left+o.p2c(j.v)-o.labelWidth/2);if(o.position=="bottom"){r.top=l.top+l.padding}else{r.bottom=bb-(l.top+l.height-l.padding)}}else{r.top=Math.round(aH.top+o.p2c(j.v)-o.labelHeight/2);if(o.position=="left"){r.right=bf-(l.left+l.width-l.padding);h="right"}else{r.left=l.left+l.padding;h="left"}}r.width=o.labelWidth;var p=["position:absolute","text-align:"+h];for(var q in r){p.push(q+":"+r[q]+"px")}k.push('<div class="tickLabel" style="'+p.join(";")+'">'+j.label+"</div>")}k.push("</div>")}k.push("</div>");bk.append(k.join(""))}function aT(g){if(g.lines.show){bo(g)}if(g.bars.show){aS(g)}if(g.points.show){bu(g)}}function bo(k){function l(x,w,p,r,s){var q=x.points,o=x.pointsize,z=null,A=null;be.beginPath();for(var y=o;y<q.length;y+=o){var B=q[y-o],t=q[y-o+1],C=q[y],u=q[y+1];if(B==null||C==null){continue}if(t<=u&&t<s.min){if(u<s.min){continue}B=(s.min-t)/(u-t)*(C-B)+B;t=s.min}else{if(u<=t&&u<s.min){if(t<s.min){continue}C=(s.min-t)/(u-t)*(C-B)+B;u=s.min}}if(t>=u&&t>s.max){if(u>s.max){continue}B=(s.max-t)/(u-t)*(C-B)+B;t=s.max}else{if(u>=t&&u>s.max){if(t>s.max){continue}C=(s.max-t)/(u-t)*(C-B)+B;u=s.max}}if(B<=C&&B<r.min){if(C<r.min){continue}t=(r.min-B)/(C-B)*(u-t)+t;B=r.min}else{if(C<=B&&C<r.min){if(B<r.min){continue}u=(r.min-B)/(C-B)*(u-t)+t;C=r.min}}if(B>=C&&B>r.max){if(C>r.max){continue}t=(r.max-B)/(C-B)*(u-t)+t;B=r.max}else{if(C>=B&&C>r.max){if(B>r.max){continue}u=(r.max-B)/(C-B)*(u-t)+t;C=r.max}}if(B!=z||t!=A){be.moveTo(r.p2c(B)+w,s.p2c(t)+p)}z=C;A=u;be.lineTo(r.p2c(C)+w,s.p2c(u)+p)}be.stroke()}function j(G,y,z){var r=G.points,s=G.pointsize,B=Math.min(Math.max(0,z.min),z.max),q=0,t,u=false,C=1,D=0,x=0;while(true){if(s>0&&q>r.length+s){break}q+=s;var o=r[q-s],E=r[q-s+C],p=r[q],F=r[q+C];if(u){if(s>0&&o!=null&&p==null){x=q;s=-s;C=2;continue}if(s<0&&q==D+s){be.fill();u=false;s=-s;C=1;q=D=x+s;continue}}if(o==null||p==null){continue}if(o<=p&&o<y.min){if(p<y.min){continue}E=(y.min-o)/(p-o)*(F-E)+E;o=y.min}else{if(p<=o&&p<y.min){if(o<y.min){continue}F=(y.min-o)/(p-o)*(F-E)+E;p=y.min}}if(o>=p&&o>y.max){if(p>y.max){continue}E=(y.max-o)/(p-o)*(F-E)+E;o=y.max}else{if(p>=o&&p>y.max){if(o>y.max){continue}F=(y.max-o)/(p-o)*(F-E)+E;p=y.max}}if(!u){be.beginPath();be.moveTo(y.p2c(o),z.p2c(B));u=true}if(E>=z.max&&F>=z.max){be.lineTo(y.p2c(o),z.p2c(z.max));be.lineTo(y.p2c(p),z.p2c(z.max));continue}else{if(E<=z.min&&F<=z.min){be.lineTo(y.p2c(o),z.p2c(z.min));
be.lineTo(y.p2c(p),z.p2c(z.min));continue}}var A=o,w=p;if(E<=F&&E<z.min&&F>=z.min){o=(z.min-E)/(F-E)*(p-o)+o;E=z.min}else{if(F<=E&&F<z.min&&E>=z.min){p=(z.min-E)/(F-E)*(p-o)+o;F=z.min}}if(E>=F&&E>z.max&&F<=z.max){o=(z.max-E)/(F-E)*(p-o)+o;E=z.max}else{if(F>=E&&F>z.max&&E<=z.max){p=(z.max-E)/(F-E)*(p-o)+o;F=z.max}}if(o!=A){be.lineTo(y.p2c(A),z.p2c(E))}be.lineTo(y.p2c(o),z.p2c(E));be.lineTo(y.p2c(p),z.p2c(F));if(p!=w){be.lineTo(y.p2c(p),z.p2c(F));be.lineTo(y.p2c(w),z.p2c(F))}}}be.save();be.translate(aH.left,aH.top);be.lineJoin="round";var h=k.lines.lineWidth,n=k.shadowSize;if(h>0&&n>0){be.lineWidth=n;be.strokeStyle="rgba(0,0,0,0.1)";var g=Math.PI/18;l(k.datapoints,Math.sin(g)*(h/2+n/2),Math.cos(g)*(h/2+n/2),k.xaxis,k.yaxis);be.lineWidth=n/2;l(k.datapoints,Math.sin(g)*(h/2+n/4),Math.cos(g)*(h/2+n/4),k.xaxis,k.yaxis)}be.lineWidth=h;be.strokeStyle=k.color;var m=bE(k.lines,k.color,0,aB);if(m){be.fillStyle=m;j(k.datapoints,k.xaxis,k.yaxis)}if(h>0){l(k.datapoints,0,0,k.xaxis,k.yaxis)}be.restore()}function bu(k){function g(y,z,q,B,s,r,u,o){var t=y.points,p=y.pointsize;for(var A=0;A<t.length;A+=p){var w=t[A],x=t[A+1];if(w==null||w<r.min||w>r.max||x<u.min||x>u.max){continue}be.beginPath();w=r.p2c(w);x=u.p2c(x)+B;if(o=="circle"){be.arc(w,x,z,0,s?Math.PI:Math.PI*2,false)}else{o(be,w,x,z,s)}be.closePath();if(q){be.fillStyle=q;be.fill()}be.stroke()}}be.save();be.translate(aH.left,aH.top);var h=k.points.lineWidth,m=k.shadowSize,n=k.points.radius,j=k.points.symbol;if(h>0&&m>0){var l=m/2;be.lineWidth=l;be.strokeStyle="rgba(0,0,0,0.1)";g(k.datapoints,n,null,l+l/2,true,k.xaxis,k.yaxis,j);be.strokeStyle="rgba(0,0,0,0.2)";g(k.datapoints,n,null,l/2,true,k.xaxis,k.yaxis,j)}be.lineWidth=h;be.strokeStyle=k.color;g(k.datapoints,n,bE(k.points,k.color),0,false,k.xaxis,k.yaxis,j);be.restore()}function bj(p,q,g,u,m,y,A,r,s,h,l,B){var z,j,t,n,x,C,o,w,k;if(l){w=C=o=true;x=false;z=g;j=p;n=q+u;t=q+m;if(j<z){k=j;j=z;z=k;x=true;C=false}}else{x=C=o=true;w=false;z=p+u;j=p+m;t=g;n=q;if(n<t){k=n;n=t;t=k;w=true;o=false}}if(j<r.min||z>r.max||n<s.min||t>s.max){return}if(z<r.min){z=r.min;x=false}if(j>r.max){j=r.max;C=false}if(t<s.min){t=s.min;w=false}if(n>s.max){n=s.max;o=false}z=r.p2c(z);t=s.p2c(t);j=r.p2c(j);n=s.p2c(n);if(A){h.beginPath();h.moveTo(z,t);h.lineTo(z,n);h.lineTo(j,n);h.lineTo(j,t);h.fillStyle=A(t,n);h.fill()}if(B>0&&(x||C||o||w)){h.beginPath();h.moveTo(z,t+y);if(x){h.lineTo(z,n+y)}else{h.moveTo(z,n+y)}if(o){h.lineTo(j,n+y)}else{h.moveTo(j,n+y)}if(C){h.lineTo(j,t+y)}else{h.moveTo(j,t+y)}if(w){h.lineTo(z,t+y)}else{h.moveTo(z,t+y)}h.stroke()}}function aS(h){function j(l,m,t,o,u,r,s){var q=l.points,p=l.pointsize;for(var n=0;n<q.length;n+=p){if(q[n]==null){continue}bj(q[n],q[n+1],q[n+2],m,t,o,u,r,s,be,h.bars.horizontal,h.bars.lineWidth)}}be.save();be.translate(aH.left,aH.top);be.lineWidth=h.bars.lineWidth;be.strokeStyle=h.color;var k=h.bars.align=="left"?0:-h.bars.barWidth/2;var g=h.bars.fill?function(m,l){return bE(h.bars,h.color,m,l)}:null;j(h.datapoints,k,k+h.bars.barWidth,0,g,h.xaxis,h.yaxis);be.restore()}function bE(k,m,l,h){var j=k.fill;if(!j){return null}if(k.fillColor){return bw(k.fillColor,l,h,m)}var g=f.color.parse(m);g.a=typeof j=="number"?j:0.4;g.normalize();return g.toString()}function aJ(){bk.find(".legend").remove();if(!a5.legend.show){return}var j=[],l=false,q=a5.legend.labelFormatter,r,g;for(var m=0;m<a3.length;++m){r=a3[m];g=r.label;if(!g){continue}if(m%a5.legend.noColumns==0){if(l){j.push("</tr>")}j.push("<tr>");l=true}if(q){g=q(g,r)}j.push('<td class="legendColorBox"><div style="border:1px solid '+a5.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+r.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+g+"</td>")}if(l){j.push("</tr>")}if(j.length==0){return}var s='<table style="font-size:smaller;color:'+a5.grid.color+'">'+j.join("")+"</table>";if(a5.legend.container!=null){f(a5.legend.container).html(s)}else{var h="",o=a5.legend.position,n=a5.legend.margin;if(n[0]==null){n=[n,n]}if(o.charAt(0)=="n"){h+="top:"+(n[1]+aH.top)+"px;"}else{if(o.charAt(0)=="s"){h+="bottom:"+(n[1]+aH.bottom)+"px;"}}if(o.charAt(1)=="e"){h+="right:"+(n[0]+aH.right)+"px;"}else{if(o.charAt(1)=="w"){h+="left:"+(n[0]+aH.left)+"px;"}}var t=f('<div class="legend">'+s.replace('style="','style="position:absolute;'+h+";")+"</div>").appendTo(bk);if(a5.legend.backgroundOpacity!=0){var k=a5.legend.backgroundColor;if(k==null){k=a5.grid.backgroundColor;if(k&&typeof k=="string"){k=f.color.parse(k)}else{k=f.color.extract(t,"background-color")}k.a=1;k=k.toString()}var p=t.children();f('<div style="position:absolute;width:'+p.width()+"px;height:"+p.height()+"px;"+h+"background-color:"+k+';"> </div>').prependTo(t).css("opacity",a5.legend.backgroundOpacity)}}}var bH=[],a7=null;function a9(z,B,E){var s=a5.grid.mouseActiveRadius,H=s*s+1,h=null,p=false,k,m;for(k=a3.length-1;k>=0;--k){if(!E(a3[k])){continue}var r=a3[k],A=r.xaxis,C=r.yaxis,l=r.datapoints.points,n=r.datapoints.pointsize,q=A.c2p(z),t=C.c2p(B),F=s/A.scale,G=s/C.scale;if(A.options.inverseTransform){F=Number.MAX_VALUE}if(C.options.inverseTransform){G=Number.MAX_VALUE}if(r.lines.show||r.points.show){for(m=0;m<l.length;m+=n){var x=l[m],y=l[m+1];if(x==null){continue}if(x-q>F||x-q<-F||y-t>G||y-t<-G){continue}var u=Math.abs(A.p2c(x)-z),w=Math.abs(C.p2c(y)-B),o=u*u+w*w;if(o<H){H=o;h=[k,m/n]}}}if(r.bars.show&&!h){var D=r.bars.align=="left"?0:-r.bars.barWidth/2,j=D+r.bars.barWidth;for(m=0;m<l.length;m+=n){var x=l[m],y=l[m+1],g=l[m+2];if(x==null){continue}if(a3[k].bars.horizontal?(q<=Math.max(g,x)&&q>=Math.min(g,x)&&t>=y+D&&t<=y+j):(q>=x+D&&q<=x+j&&t>=Math.min(g,y)&&t<=Math.max(g,y))){h=[k,m/n]}}}}if(h){k=h[0];m=h[1];n=a3[k].datapoints.pointsize;return{datapoint:a3[k].datapoints.points.slice(m*n,(m+1)*n),dataIndex:m,series:a3[k],seriesIndex:k}}return null}function bI(g){if(a5.grid.hoverable){aD("plothover",g,function(h){return h.hoverable!=false})}}function aM(g){if(a5.grid.hoverable){aD("plothover",g,function(h){return false})}}function a2(g){aD("plotclick",g,function(h){return h.clickable!=false})}function aD(o,p,n){var m=b.offset(),j=p.pageX-m.left-aH.left,l=p.pageY-m.top-aH.top,g=bn({left:j,top:l});g.pageX=p.pageX;g.pageY=p.pageY;var q=a9(j,l,n);if(q){q.pageX=parseInt(q.series.xaxis.p2c(q.datapoint[0])+m.left+aH.left);q.pageY=parseInt(q.series.yaxis.p2c(q.datapoint[1])+m.top+aH.top)}if(a5.grid.autoHighlight){for(var k=0;k<bH.length;++k){var h=bH[k];if(h.auto==o&&!(q&&h.series==q.series&&h.point[0]==q.datapoint[0]&&h.point[1]==q.datapoint[1])){a0(h.series,h.point)}}if(q){c(q.series,q.datapoint,o)}}bk.trigger(o,[g,q])}function aR(){if(!a7){a7=setTimeout(aF,30)}}function aF(){a7=null;bq.save();bq.clearRect(0,0,bf,bb);bq.translate(aH.left,aH.top);var g,h;for(g=0;g<bH.length;++g){h=bH[g];if(h.series.bars.show){aC(h.series,h.point)}else{bd(h.series,h.point)}}bq.restore();bv(by.drawOverlay,[bq])}function c(j,l,g){if(typeof j=="number"){j=a3[j]}if(typeof l=="number"){var h=j.datapoints.pointsize;l=j.datapoints.points.slice(h*l,h*(l+1))}var k=bx(j,l);if(k==-1){bH.push({series:j,point:l,auto:g});aR()}else{if(!g){bH[k].auto=false}}}function a0(g,j){if(g==null&&j==null){bH=[];aR()}if(typeof g=="number"){g=a3[g]}if(typeof j=="number"){j=g.data[j]}var h=bx(g,j);if(h!=-1){bH.splice(h,1);aR()}}function bx(h,g){for(var k=0;k<bH.length;++k){var j=bH[k];if(j.series==h&&j.point[0]==g[0]&&j.point[1]==g[1]){return k}}return -1}function bd(k,l){var m=l[0],o=l[1],g=k.xaxis,h=k.yaxis;if(m<g.min||m>g.max||o<h.min||o>h.max){return}var j=k.points.radius+k.points.lineWidth/2;bq.lineWidth=j;bq.strokeStyle=f.color.parse(k.color).scale("a",0.5).toString();var n=1.5*j,m=g.p2c(m),o=h.p2c(o);bq.beginPath();if(k.points.symbol=="circle"){bq.arc(m,o,n,0,2*Math.PI,false)}else{k.points.symbol(bq,m,o,n,false)}bq.closePath();bq.stroke()}function aC(g,k){bq.lineWidth=g.bars.lineWidth;bq.strokeStyle=f.color.parse(g.color).scale("a",0.5).toString();var h=f.color.parse(g.color).scale("a",0.5).toString();var j=g.bars.align=="left"?0:-g.bars.barWidth/2;
bj(k[0],k[1],k[2]||0,j,j+g.bars.barWidth,0,function(){return h},g.xaxis,g.yaxis,bq,g.bars.horizontal,g.bars.lineWidth)}function bw(g,p,j,o){if(typeof g=="string"){return g}else{var h=be.createLinearGradient(0,j,0,p);for(var m=0,n=g.colors.length;m<n;++m){var l=g.colors[m];if(typeof l!="string"){var k=f.color.parse(o);if(l.brightness!=null){k=k.scale("rgb",l.brightness)}if(l.opacity!=null){k.a*=l.opacity}l=k.toString()}h.addColorStop(m/(n-1),l)}return h}}}f.plot=function(a,c,h){var b=new d(f(a),c,h,f.plot.plugins);return b};f.plot.version="0.7";f.plot.plugins=[];f.plot.formatDate=function(r,x,u){var b=function(g){g=""+g;return g.length==1?"0"+g:g};var y=[];var a=false,t=false;var c=r.getUTCHours();var s=c<12;if(u==null){u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(x.search(/%p|%P/)!=-1){if(c>12){c=c-12}else{if(c==0){c=12}}}for(var w=0;w<x.length;++w){var q=x.charAt(w);if(a){switch(q){case"h":q=""+c;break;case"H":q=b(c);break;case"M":q=b(r.getUTCMinutes());break;case"S":q=b(r.getUTCSeconds());break;case"d":q=""+r.getUTCDate();break;case"m":q=""+(r.getUTCMonth()+1);break;case"y":q=""+r.getUTCFullYear();break;case"b":q=""+u[r.getUTCMonth()];break;case"p":q=(s)?("am"):("pm");break;case"P":q=(s)?("AM"):("PM");break;case"0":q="";t=true;break}if(q&&t){q=b(q);t=false}y.push(q);if(!t){a=false}}else{if(q=="%"){a=true}else{y.push(q)}}}return y.join("")};function e(a,b){return b*Math.floor(a/b)}})(jQuery);if(typeof Mendeley==="undefined"){Mendeley={}}if(typeof Mendeley.PDF==="undefined"){Mendeley.PDF={}}Mendeley.PDF.Preview={constants:{idLookupUri:"/lookinside/lookup/id/%ID",getDetailsUri:"/lookinside/details/id/%ID",hashPrefix:"page-"},isOpen:false,isDepositInterrupt:false,close:function(){if(!Mendeley.PDF.Preview.isOpen){return false}Mendeley.PDF.Preview.isOpen=false;$("html").removeClass("reader");$("body").removeClass("reader");$("#reader-overlay").fadeOut(150);if(typeof window.history.replaceState==="function"){history.replaceState({},"",self.location.href.split("#")[0])}else{window.location.hash=""}Mendeley.PDF.Preview.reset();return false},open:function(a){if(Mendeley.PDF.Preview.isOpen){return false}$("html").addClass("reader");$("body").addClass("reader");$("#reader-overlay").fadeIn(250,function(){if(Mendeley.PDF.Preview.isOpen){return}Mendeley.PDF.Preview.isOpen=true;Mendeley.PDF.Preview.redrawReaderUI();a=(a&&!isNaN(a))?parseInt(a,10):1;Mendeley.PDF.Preview.jumpToPage(a)});return false},jumpToPage:function(a){if(!a){a=window.location.hash;a=a.replace("#"+Mendeley.PDF.Preview.constants.hashPrefix,"")}if(typeof window.history.replaceState==="function"){history.replaceState({},"",self.location.href.split("#")[0]+"#"+Mendeley.PDF.Preview.constants.hashPrefix+a)}else{window.location.hash="";window.location.hash="#"+Mendeley.PDF.Preview.constants.hashPrefix+a}},setSize:function(d,a,b){var c=$(d);c.height(a);c.width(b);if(c.length>0&&c[0].nodeName&&c[0].nodeName.toLowerCase()==="img"){c.attr("height",a);c.attr("width",b)}},reset:function(){$("#scroller").empty();Mendeley.PDF.Preview.pageImages={};Mendeley.PDF.Preview.pagesTotal=0},setup:function(b,a){Mendeley.PDF.Preview.reset();Mendeley.PDF.Preview.isDepositInterrupt=a;$.getJSON(Mendeley.PDF.Preview.constants.idLookupUri.replace("%ID",b),null,function(e,c,d){if(e===null){return}if(c==="success"&&e.id&&e.id===b&&e.pages>=0){Mendeley.PDF.Preview.setupThumbnailAndPages(b,e)}})},setupThumbnailAndPages:function(c,b){var a=b.pages;$.getJSON(Mendeley.PDF.Preview.constants.getDetailsUri.replace("%ID",c),null,function(g,d,e){if(d==="success"&&g.id&&g.id===c&&g.pages&&g.pages.length>0&&g.pages.length===a){var f=Mendeley.PDF.Preview.setupPages(c,g.pages);if(f){Mendeley.PDF.Preview.initialiseReader()}}});$("#pdf-hover").css({opacity:"0"});$("#pdf-hover").children().css({opacity:"0"})},makeCallbackForNextPage:function(a){return function(){Mendeley.PDF.Preview.jumpToPage(a)}},setupPages:function(c,e){var m=true;var n=$("#reader-page-template").html();var o=$("#scroller");var f;var l;for(f=0;f<e.length;f++){var h=e[f];if(!h.url||!h.width||!h.height||!n){return false}var j=parseInt(f,10)+1;var d=n.replace(/%ID/g,f).replace(/%W/g,h.width).replace(/%H/g,h.height).replace(/%P/g,j);var a=$(d);var p=a.find("#page-img-container-"+f);var k=(j===e.length)?1:j+1;p.click(Mendeley.PDF.Preview.makeCallbackForNextPage(k));if(h.truncate&&(h.title||h.body)){p.prepend('<div class="truncate" />')}if(h.title){var g=$("<h1 />");g.html(h.title);p.append(g);if(!h.body){g.css("padding-bottom","50px")}m=false}if(h.body){l=$('<div class="plaintext" />');l.html(h.body);p.append(l);m=false}else{if(!h.title){l=$('<div class="notext">No Body Text -- translate me!</div>');p.append(l)}}if(m){$("#toggletext").hide()}o.append(a);Mendeley.PDF.Preview.addPageImage(f,h.url)}$(".pdf-image").data("loaded",false);return true},initialiseReader:function(){$("#pdf-close").click(Mendeley.PDF.Preview.close);$("#reader-overlay").click(Mendeley.PDF.Preview.close);$("#reader").click(function(c){c.stopPropagation()});var b=$("#viewer");$("#toggletext").toggle(function(){b.addClass("show-text");b.removeClass("show-pdf")},function(){b.addClass("show-pdf");b.removeClass("show-text")});$("#viewer").scroll(Mendeley.PDF.Preview.onScroll);$.each(Mendeley.PDF.Preview.pageImages,function(c){$("#pdf-page-image-"+c).one("inview",function(d,e){if(e){pageId=$(this).attr("id");pageId=pageId.replace("pdf-page-image-","");Mendeley.PDF.Preview.showPage(pageId)}})});Mendeley.PDF.Preview.showPage(0);if(Mendeley.PDF.Preview.isDepositInterrupt){$("#scroller > div").css("display","none");$("#scroller #page-1, #scroller #page-2").css("display","block");$(".look-inside-interrupt").clone().appendTo($("#scroller"))}if(window.location.hash.indexOf("#"+Mendeley.PDF.Preview.constants.hashPrefix)===0){var a=window.location.hash.replace("#"+Mendeley.PDF.Preview.constants.hashPrefix,"");a=parseInt(a,10);if(a<1||a>Mendeley.PDF.Preview.pagesTotal){a=1}Mendeley.PDF.Preview.open(a)}},onScroll:function(){var a=$("#viewer"),c=a.height(),b=[],d=$.expando;$.each($.cache,function(g,e){var f=e.events;if(!f){e=this[d];f=e&&e.events}if(f&&f.inview){b.push(e.handle.elem)}});if(b.length){$(b).each(function(){var f=$(this),g=a.offset().top,h=f.offset().top-g,e=f.height();inview=f.data("inview")||false;if(h+e<0||h>c){if(inview){f.data("inview",false)}}else{if(!inview){f.trigger("inview",[true]);f.data("inview",true)}}})}},redrawReaderUI:function(){readerSize=$("#reader").width();$("#reader-overlay .top-shadow").width(readerSize);$("#reader-overlay .bottom-shadow").width(readerSize)},pageImages:{},pagesTotal:0,addPageImage:function(b,a){Mendeley.PDF.Preview.pageImages[b]=a;Mendeley.PDF.Preview.pagesTotal++},showPage:function(b){var a=$("img#pdf-page-image-"+b);if(!a.data("loaded")){a.data("loaded",true);a.attr("alt","");a.attr("src",Mendeley.PDF.Preview.pageImages[b]).hide().fadeIn()}}};resizeReader=function(){readerSize=$("#reader").width();$("#reader-overlay .top-shadow").width(readerSize);$("#reader-overlay .bottom-shadow").width(readerSize)};$(window).resize(function(){resizeReader()});((function(){var b;b=function(){function c(){this.options_index=0,this.parsed=[]}return c.prototype.add_node=function(d){return d.nodeName==="OPTGROUP"?this.add_group(d):this.add_option(d)},c.prototype.add_group=function(j){var h,o,n,m,l,k;h=this.parsed.length,this.parsed.push({array_index:h,group:!0,label:j.label,children:0,disabled:j.disabled}),l=j.childNodes,k=[];for(n=0,m=l.length;n<m;n++){o=l[n],k.push(this.add_option(o,h,j.disabled))}return k},c.prototype.add_option=function(e,d,f){if(e.nodeName==="OPTION"){return e.text!==""?(d!=null&&(this.parsed[d].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:f===!0?f:e.disabled,group_array_index:d,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1
}},c}(),b.select_to_array=function(a){var m,l,k,j,h;l=new b,h=a.childNodes;for(k=0,j=h.length;k<j;k++){m=h[k],l.add_node(m)}return l.parsed},this.SelectParser=b})).call(this),function(){var d,c;c=this,d=function(){function b(f,e){this.form_field=f,this.options=e!=null?e:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return b.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(a){return e.test_active_click(a)},this.activate_action=function(a){return e.activate_field(a)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.max_selected_options=this.options.max_selected_options||Infinity},b.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},b.prototype.mouse_enter=function(){return this.mouse_on_container=!0},b.prototype.mouse_leave=function(){return this.mouse_on_container=!1},b.prototype.input_focus=function(f){var e=this;if(!this.active_field){return setTimeout(function(){return e.container_mousedown()},50)}},b.prototype.input_blur=function(f){var e=this;if(!this.mouse_on_container){return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)}},b.prototype.result_add_option=function(f){var e,g;return f.disabled?"":(f.dom_id=this.container_id+"_o_"+f.array_index,e=f.selected&&this.is_multiple?[]:["active-result"],f.selected&&e.push("result-selected"),f.group_array_index!=null&&e.push("group-option"),f.classes!==""&&e.push(f.classes),g=f.style.cssText!==""?' style="'+f.style+'"':"",'<li id="'+f.dom_id+'" class="'+e.join(" ")+'"'+g+">"+f.html+"</li>")},b.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},b.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},b.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},b.prototype.keyup_checker=function(f){var e,g;e=(g=f.which)!=null?g:f.keyCode,this.search_field_scale();switch(e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0){return this.keydown_backstroke()}if(!this.pending_backstroke){return this.result_clear_highlight(),this.results_search()}break;case 13:f.preventDefault();if(this.results_showing){return this.result_select(f)}break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},b.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},b.prototype.generate_random_char=function(){var f,e,g;return f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",g=Math.floor(Math.random()*f.length),e=f.substring(g,g+1)},b}(),c.AbstractChosen=d}.call(this),function(){var h,g,m,l,k=Object.prototype.hasOwnProperty,j=function(f,e){function n(){this.constructor=f}for(var o in e){k.call(e,o)&&(f[o]=e[o])}return n.prototype=e.prototype,f.prototype=new n,f.__super__=e.prototype,f};l=this,h=jQuery,h.fn.extend({chosen:function(a){return !h.browser.msie||h.browser.version!=="6.0"&&h.browser.version!=="7.0"?this.each(function(c){var b;b=h(this);if(!b.hasClass("chzn-done")){return b.data("chosen",new g(this,a))}}):this}}),g=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return j(c,a),c.prototype.setup=function(){return this.form_field_jq=h(this.form_field),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},c.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},c.prototype.set_up_html=function(){var n,q,p,o;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),n=h("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?n.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):n.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(n),this.container=h("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),q=this.container.height(),p=this.f_width-m(this.dropdown),this.dropdown.css({width:p+"px",top:q+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),o=p-m(this.search_container)-m(this.search_field),this.search_field.css({width:o+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},c.prototype.register_observers=function(){var b=this;return this.container.mousedown(function(d){return b.container_mousedown(d)}),this.container.mouseup(function(d){return b.container_mouseup(d)}),this.container.mouseenter(function(d){return b.mouse_enter(d)}),this.container.mouseleave(function(d){return b.mouse_leave(d)}),this.search_results.mouseup(function(d){return b.search_results_mouseup(d)}),this.search_results.mouseover(function(d){return b.search_results_mouseover(d)}),this.search_results.mouseout(function(d){return b.search_results_mouseout(d)}),this.form_field_jq.bind("liszt:updated",function(d){return b.results_update_field(d)}),this.search_field.blur(function(d){return b.input_blur(d)}),this.search_field.keyup(function(d){return b.keyup_checker(d)}),this.search_field.keydown(function(d){return b.keydown_checker(d)}),this.is_multiple?(this.search_choices.click(function(d){return b.choices_click(d)}),this.search_field.focus(function(d){return b.input_focus(d)})):this.container.click(function(d){return d.preventDefault()})},c.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()}this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple){return this.selected_item.bind("focus",this.activate_action)}},c.prototype.container_mousedown=function(d){var e;
if(!this.is_disabled){return e=d!=null?h(d.target).hasClass("search-choice-close"):!1,d&&d.type==="mousedown"&&!this.results_showing&&d.stopPropagation(),!this.pending_destroy_click&&!e?(this.active_field?!this.is_multiple&&d&&(h(d.target)[0]===this.selected_item[0]||h(d.target).parents("a.chzn-single").length)&&(d.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),h(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1}},c.prototype.container_mouseup=function(b){if(b.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(b)}},c.prototype.blur_test=function(b){if(!this.active_field&&this.container.hasClass("chzn-container-active")){return this.close_field()}},c.prototype.close_field=function(){return h(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return !this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(d){return h(d.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){var n,d,q,p,o;this.parsing=!0,this.results_data=l.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),n="",o=this.results_data;for(q=0,p=o.length;q<p;q++){d=o[q],d.group?n+=this.result_add_group(d):d.empty||(n+=this.result_add_option(d),d.selected&&this.is_multiple?this.choice_build(d):d.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()))}return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(n),this.parsing=!1},c.prototype.result_add_group=function(d){return d.disabled?"":(d.dom_id=this.container_id+"_g_"+d.array_index,'<li id="'+d.dom_id+'" class="group-result">'+h("<div />").text(d.label).html()+"</li>")},c.prototype.result_do_highlight=function(o){var n,s,r,q,p;if(o.length){this.result_clear_highlight(),this.result_highlight=o,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),p=this.search_results.scrollTop(),q=r+p,s=this.result_highlight.position().top+this.search_results.scrollTop(),n=s+this.result_highlight.outerHeight();if(n>=q){return this.search_results.scrollTop(n-r>0?n-r:0)}if(s<p){return this.search_results.scrollTop(s)}}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){var b;if(!this.is_multiple){this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected)}else{if(this.max_selected_options<=this.choices){return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}}return b=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:b+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},c.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},c.prototype.set_tab_index=function(e){var d;if(this.form_field_jq.attr("tabindex")){return d=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",d):(this.selected_item.attr("tabindex",d),this.search_field.attr("tabindex",-1))}},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(d){var e;e=h(d.target).hasClass("active-result")?h(d.target):h(d.target).parents(".active-result").first();if(e.length){return this.result_highlight=e,this.result_select(d)}},c.prototype.search_results_mouseover=function(d){var e;e=h(d.target).hasClass("active-result")?h(d.target):h(d.target).parents(".active-result").first();if(e){return this.result_do_highlight(e)}},c.prototype.search_results_mouseout=function(d){if(h(d.target).hasClass("active-result")){return this.result_clear_highlight()}},c.prototype.choices_click=function(d){d.preventDefault();if(this.active_field&&!h(d.target).hasClass("search-choice")&&!this.results_showing){return this.results_show()}},c.prototype.choice_build=function(f){var p,o,n=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(p=this.container_id+"_c_"+f.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+p+'"><span>'+f.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+f.array_index+'"></a></li>'),o=h("#"+p).find("a").first(),o.click(function(b){return n.choice_destroy_link_click(b)}))},c.prototype.choice_destroy_link_click=function(d){return d.preventDefault(),this.is_disabled?d.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(h(d.target)))},c.prototype.choice_destroy=function(b){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(b.attr("rel")),b.parents("li").first().remove()},c.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide()}},c.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},c.prototype.result_select=function(n){var f,q,p,o;if(this.result_highlight){return f=this.result_highlight,q=f.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(f):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=f,this.selected_item.removeClass("chzn-default")),f.addClass("result-selected"),o=q.substr(q.lastIndexOf("_")+1),p=this.results_data[o],p.selected=!0,this.form_field.options[p.options_index].selected=!0,this.is_multiple?this.choice_build(p):(this.selected_item.find("span").first().text(p.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!n.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change",{selected:this.form_field.options[p.options_index].value}),this.search_field_scale()}},c.prototype.result_activate=function(b){return b.addClass("active-result")
},c.prototype.result_deactivate=function(b){return b.removeClass("active-result")},c.prototype.result_deselect=function(e){var n,f;return f=this.results_data[e],f.selected=!1,this.form_field.options[f.options_index].selected=!1,n=h("#"+this.container_id+"_o_"+e),n.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[f.options_index].value}),this.search_field_scale()},c.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1){return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')}},c.prototype.winnow_results=function(){var L,K,J,I,H,G,F,E,D,C,B,A,z,y,x,w,u,t;this.no_results_clear(),D=0,C=this.search_field.val()===this.default_text?"":h("<div/>").text(h.trim(this.search_field.val())).html(),G=this.search_contains?"":"^",H=new RegExp(G+C.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),z=new RegExp(C.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),t=this.results_data;for(y=0,w=t.length;y<w;y++){K=t[y];if(!K.disabled&&!K.empty){if(K.group){h("#"+K.dom_id).css("display","none")}else{if(!this.is_multiple||!K.selected){L=!1,E=K.dom_id,F=h("#"+E);if(H.test(K.html)){L=!0,D+=1}else{if(K.html.indexOf(" ")>=0||K.html.indexOf("[")===0){I=K.html.replace(/\[|\]/g,"").split(" ");if(I.length){for(x=0,u=I.length;x<u;x++){J=I[x],H.test(J)&&(L=!0,D+=1)}}}}L?(C.length?(B=K.html.search(z),A=K.html.substr(0,B+C.length)+"</em>"+K.html.substr(B+C.length),A=A.substr(0,B)+"<em>"+A.substr(B)):A=K.html,F.html(A),this.result_activate(F),K.group_array_index!=null&&h("#"+this.results_data[K.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&E===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(F))}}}}return D<1&&C.length?this.no_results(C):this.winnow_results_set_highlight()},c.prototype.winnow_results_clear=function(){var n,r,q,p,o;this.search_field.val(""),r=this.search_results.find("li"),o=[];for(q=0,p=r.length;q<p;q++){n=r[q],n=h(n),n.hasClass("group-result")?o.push(n.css("display","auto")):!this.is_multiple||!n.hasClass("result-selected")?o.push(this.result_activate(n)):o.push(void 0)}return o},c.prototype.winnow_results_set_highlight=function(){var e,d;if(!this.result_highlight){d=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=d.length?d.first():this.search_results.find(".active-result").first();if(e!=null){return this.result_do_highlight(e)}}},c.prototype.no_results=function(d){var e;return e=h('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),e.find("span").first().html(d),this.search_results.append(e)},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var d,e;this.result_highlight?this.results_showing&&(e=this.result_highlight.nextAll("li.active-result").first(),e&&this.result_do_highlight(e)):(d=this.search_results.find("li.active-result").first(),d&&this.result_do_highlight(h(d)));if(!this.results_showing){return this.results_show()}},c.prototype.keyup_arrow=function(){var b;if(!this.results_showing&&!this.is_multiple){return this.results_show()}if(this.result_highlight){return b=this.result_highlight.prevAll("li.active-result"),b.length?this.result_do_highlight(b.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())}},c.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClass("search-choice-focus"))},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(e){var d,f;d=(f=e.which)!=null?f:e.keyCode,this.search_field_scale(),d!==8&&this.pending_backstroke&&this.clear_backstroke();switch(d){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},c.prototype.search_field_scale=function(){var w,u,t,s,r,q,p,o,n;if(this.is_multiple){t=0,p=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",q=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(o=0,n=q.length;o<n;o++){s=q[o],r+=s+":"+this.search_field.css(s)+";"}return u=h("<div />",{style:r}),u.text(this.search_field.val()),h("body").append(u),p=u.width()+25,u.remove(),p>this.f_width-10&&(p=this.f_width-10),this.search_field.css({width:p+"px"}),w=this.container.height(),this.dropdown.css({top:w+"px"})}},c.prototype.generate_random_id=function(){var d;d="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(h("#"+d).length>0){d+=this.generate_random_char()}return d},c}(AbstractChosen),m=function(d){var c;return c=d.outerWidth()-d.width()},l.get_side_border_padding=m}.call(this);jQuery.validator.addMethod("containsDigitAndLetter",function(b,a){return this.optional(a)||(/\d+/.test(b)&&/[a-zA-Z]+/.test(b))},"Please include at least one digit and one letter");Modernizr.load({test:Modernizr.input.placeholder,nope:["/static/js/lib/jquery.placeholder.min.js"],complete:function(){if(!Modernizr.input.placeholder){$("input[placeholder], textarea[placeholder]").placeholder()}}});LookInside=function(b){var a=this;this.init=function(){a.registerClickHandlers()};this.registerClickHandlers=function(){$(".lookinside-href").each(function(e,d){var f=$(d).attr("href");if(f===undefined){return}var c=a.retrieveDocId(f);$(d).click(function(g){var h=false;if($(this).hasClass("interrupt-preview")){h=true}else{if($(this).hasClass("deposit-interrupt-preview")){var k=$(this).attr("contentType");var j=$(this).attr("doi");h=b.isDepositInterruptible(k,j)}}Mendeley.PDF.Preview.setup(c,h);Mendeley.PDF.Preview.open(0);a.togglePdfDownloadButton(g.currentTarget);g.preventDefault()})})};this.maybeAutoOpenLookInside=function(){if(a.shouldAutoShowLookInside()){$(".lookinside-href:first").click()}};this.retrieveDocId=function(c){return c.replace(/^\/(?:article|chapter|protocol|referenceworkentry)\/(.*)\/lookinside\/000.png$/m,"$1")};this.shouldAutoShowLookInside=function(){return $("#autoShowLookInside").val()==="true"};this.togglePdfDownloadButton=function(c){if($(c).parents("li,.document").hasClass("no-access")||$(".bar-actions .icon-unlock a").length){a.removePdfDownloadButton();$("#reader-overlay").addClass("no-access")}else{a.addPdfDownloadButton()}};this.addPdfDownloadButton=function(){if(!$("#reader .bar-dock").length&&$("span.action:not(:has(.access-link)):first").length){$("#reader .top-shadow").after('<div class="bar-dock"><div class="bar-wrapper"><div class="bar-actions"><span class="action icon-download-alt">'+$("a.pdf-link:first").parent().html()+"</span></div></div></div>")}};this.removePdfDownloadButton=function(){$("#reader .bar-dock").remove()}};(function(){var b,a;b=(function(){var f,k,j,e,g,d,h=this;function c(){}f=void 0;g=function(){var l;return(l=f.which)!=null?l:f.charCode};j=function(){return g()<=31};e=function(){var l;return(48<=(l=g())&&l<=57)};k=function(){var m,l,n;n=/max-length-(\d)/;m=f.currentTarget.className.match(n);l=f.currentTarget.value.length;if(m){return m[1]>l}else{return true}};d=function(){var l;l=f.currentTarget;return l.selectionStart!==l.selectionEnd};c.prototype.applyLimitKeystrokes=function(l){f=l;return j()||(e()&&(k()||d()))};return c}).call(this);a=typeof exports!=="undefined"&&exports!==null?exports:window;a.NumberField=b}).call(this);DocumentHelper=function(a){var b={};
b.queryString=function(){return document.location.search};b.currentUri=function(){return document.location.href};b.redirectTo=function(c){document.location=c};b.reloadPageWithQuery=function(c){document.location=document.location.pathname+"?"+c};return b};ExpanderController=function(b,c){var d={};var e=function(f){b.toggleExpander(f.currentTarget)};d.activate=function(){b.hideClosedExpanders(a());b.registerOnClickListeners(e)};var a=function(){return c.currentUri().split("#")[1]};return d};ExpanderView=function(){var a={};a.hideClosedExpanders=function(b){if(b){$(".expander-open").removeClass("expander-open");$("#"+b).addClass("expander-open").find(".expander-content").slideDown()}$(".expander").each(function(c,d){$(d).not(".expander-open").find(".expander-content",d).hide()})};a.registerOnClickListeners=function(b){$(".expander").not(".expander-empty").each(function(d,c){$(".expander-title",c).css("cursor","pointer").click(b)})};a.toggleExpander=function(c){var b=$(c).closest(".expander");if($(".expander-content",b).is(":visible")){b.removeClass("expander-open").find(".expander-content").slideUp()}else{b.addClass("expander-open").find(".expander-content").slideDown();if($("#pub-date-graph").length){var d=new SearchResultsGraph();d.init()}}};return a};PageView=function(a){this.focus=function(){var b=$(".focus").first();b.focus();b.val(b.val())};this.activateExpanders=function(){a.activate()};this.truncateShowLabel=function(){if($(".show-label").size()!==0){$(".abstract-content").truncate({max_length:440,more:$(".show-label").html(),less:$(".hide-label").html()})}}};PageController=function(a){this.init=function(){a.focus();a.activateExpanders();a.truncateShowLabel()}};CaptiveDivView=function(){var a=null;var c=null;var b=$(".bar-wrapper");if(b.length===0){b=$(".bar-actions")}var d=$(".bar-dock");this.registerScrollListener=function(e){a=e;$(window).scroll(function(){a()})};this.registerResizeListener=function(e){c=e;$(window).resize(function(){c()})};this.scrollActionBar=function(){if(b.length>0){if($(document).scrollTop()>d.offset().top){b.addClass("bar-scrolled").css({left:d.offset().left-$(document).scrollLeft(),width:d.width()})}else{b.removeClass("bar-scrolled").css("left",0);b.width("100%")}}};this.fixActionBar=function(){if(b.length>0){if($(document).scrollTop()>d.offset().top){b.css({left:d.offset().left-$(document).scrollLeft(),width:d.width()})}}}};CaptiveDivController=function(a){this.init=function(){a.registerScrollListener(this.onScroll);a.registerResizeListener(this.onResize)};this.onScroll=function(){a.scrollActionBar()};this.onResize=function(){a.fixActionBar()}};PersonsController=function(a){var b={};b.init=function(){a.addLinks();a.firstShorten()};return b};PersonsView=function(d){var e={};var c=d+"s";var b=10;var a=$(".document-main ul."+c);e.addLinks=function(){a.each(function(h,j){var m=$("li."+d,j).size();var k=$("li."+d+":gt("+(b-1)+")",j);if(m<=b){$(".show-all-hide-"+c,j).hide()}else{$(".show-all-hide-"+c,j).css("display","inline");$(".more-"+c,j).css("display","inline");var g=$(".show-all-hide-"+c+" .show-all-"+c,j);var l="";k.each(function(){if(l.length!==0){l+=" "}l+=$.trim($(this).text())});g.attr("title",l);g.click(function(){e.showAll(j)});var f=$(".show-all-hide-"+c+" .hide-"+c,j);f.click(function(){e.shorten(j)})}})};e.shorten=function(f){var h=$("li."+d,f).size();var g=$("li."+d+":gt("+(b-1)+")",f);if(h<b){return}g.hide();$(".show-all-"+c,f).show();$(".more-"+c,f).show();$(".hide-"+c,f).hide()};e.firstShorten=function(){var f=$(".document-main ul."+c);f.each(function(g,h){e.shorten(h)})};e.showAll=function(f){$("li:hidden",f).fadeIn("normal",function(){});$(".show-all-"+c,f).hide();$(".more-"+c,f).hide();$(".hide-"+c,f).show()};return e};SearchController=function(a,b){var c={};c.init=function(){a.registerPaginationAction(c.onPaginationAction);a.registerDateRangeAction(c.onDateRangeAction);a.registerPageKeypressAction(c.onLimitedKeypressAction);a.registerDateRangeKeypressAction(c.onLimitedKeypressAction);a.uncheck_show_all_if_toggle_set(b.queryString);a.registerShowAllCheckListener(c.redirectToToggledShowAllUri);a.registerSortOrderChangedListener(c.redirectToSortOrderUri);a.registerSearchFocus(c.searchFocus);a.registerDateFacetModeChangeListener(c.onDateFacetModeChange);if(c.singleYearMode()){a.singleYearFacetMode()}else{if(c.multiYearMode()){a.multiYearFacetMode()}}a.addInOptionForDateFacet()};c.onPaginationAction=function(d){return a.validatePage(d)};c.onDateRangeAction=function(d){return a.validatePublicationDateRange(d)};c.onLimitedKeypressAction=function(d){return a.applyLimitKeystrokes(d)};c.redirectToToggledShowAllUri=function(){var d=a.getToggleShowAllUri();b.redirectTo(d)};c.redirectToSortOrderUri=function(){b.redirectTo(this.options[this.selectedIndex].value)};c.onDateFacetModeChange=function(){return a.applyDateFacetModeChange(c.singleYearMode())};c.singleYearMode=function(){return b.queryString().indexOf("date-facet-mode=in")!==-1};c.multiYearMode=function(){return b.queryString().indexOf("date-facet-mode=between")!==-1};c.searchFocus=function(){return a.registerSearchFocus()};return c};SearchView=function(b){var a={};a.registerDateRangeAction=function(c){$(".publication-date-range").submit(c)};a.registerPaginationAction=function(c){$(".pagination").submit(c)};a.registerPageKeypressAction=function(c){$(".pagination .page-number").live("keypress",c)};a.validatePage=function(f){var e=f.currentTarget;var d=a.numberOfPages();var g=$(e).find(".page-number").val();if(parseInt(g,10)<1||parseInt(g,10)>parseInt(d,10)){var c=$(".pagination .previous-page").val();$(".pagination .invalid-page-number").text(g);$(".pagination-error").removeClass("hidden");$(".pagination .page-number").addClass("error");$(".pagination .page-number").val(c);return false}return true};a.numberOfPages=function(){return $(".pagination .number-of-pages:eq(0)").text().replace(/[^0-9]/g,"")};a.registerDateRangeKeypressAction=function(c){$("#date-facet-fields .start-year, #date-facet-fields .end-year").keypress(c)};a.registerShowAllCheckListener=function(c){$("#results-only-access-checkbox").change(c)};a.registerSortOrderChangedListener=function(c){$("#sort-results").change(c)};a.registerDateFacetModeChangeListener=function(c){$("#date-facet-mode").change(c)};a.applyLimitKeystrokes=function(c){return b.applyLimitKeystrokes(c)};a.availableStartYear=function(){return $("#available-start-year").text()};a.availableEndYear=function(){return $("#available-end-year").text()};a.validatePublicationDateRange=function(d){a.copyStartYearToEndYearForInMode();var e=d.currentTarget;var k=$(e).find(".start-year").val();var g=$(e).find(".end-year").val();var c=parseFloat(k);var m=parseFloat(g);var h=parseFloat(a.availableStartYear());var l=parseFloat(a.availableEndYear());var j=function(n){return n<h||n>l};var f=function(o,n){return o>n};a.clearDateRangeErrors();if(isNaN(c)){a.setDateRangeStartError(k,g);a.revertStartYear();return false}if(isNaN(m)){a.setDateRangeEndError(k,g);a.revertEndYear();return false}if(f(c,m)){a.setDateRangeStartError(k,g);a.revertStartYear();a.revertEndYear();return false}if(j(c)&&j(m)){a.setDateRangeStartError(k,g);a.revertStartYear();a.revertEndYear();return false}if(j(c)){a.setDateRangeStartError(k,g);a.revertStartYear();return false}if(j(m)){a.setDateRangeEndError(k,g);a.revertEndYear();return false}return true};a.clearDateRangeErrors=function(){$("#start-year-error").addClass("hidden");$("#start-year-error-single-year").addClass("hidden");$(".start-year").removeClass("error");$("#end-year-error").addClass("hidden");$(".end-year").removeClass("error")};a.setDateRangeStartError=function(c,d){if(a.isInSingleYearMode()){$("#start-year-error-single-year .invalid-range-year").text(c);$("#start-year-error-single-year").removeClass("hidden")}else{$("#start-year-error .invalid-range-year").text(c+" - "+d);$("#start-year-error").removeClass("hidden")}$(".start-year").addClass("error");$(".publication-date-range .start-year").val($(".previous-start-year").val())
};a.revertStartYear=function(){$(".start-year").addClass("error");$(".publication-date-range .start-year").val($(".previous-start-year").val())};a.setDateRangeEndError=function(c,d){if(a.isInSingleYearMode()){$("#start-year-error-single-year .invalid-range-year").text(c);$("#start-year-error-single-year").removeClass("hidden");$(".start-year").addClass("error")}else{$("#end-year-error .invalid-range-year").text(c+" - "+d);$("#end-year-error").removeClass("hidden")}$(".end-year").addClass("error");$(".publication-date-range .end-year").val($(".previous-end-year").val())};a.revertEndYear=function(){$(".end-year").addClass("error");$(".publication-date-range .end-year").val($(".previous-end-year").val())};a.isShowAllToggleSet=function(c){return(c.indexOf("showAll=true")!==-1?true:false)};a.uncheck_show_all_if_toggle_set=function(c){if(a.isShowAllToggleSet(c())){$("#results-only-access-checkbox").prop("checked",true);$("#results-only-access-checkbox").prop("value",true)}};a.getToggleShowAllUri=function(){return $("#results-only-access .results-only-access-toggle").attr("href")};a.hideEndYear=function(){$(".date-between-sep").hide();$(".date-between-end").hide()};a.showEndYear=function(){$(".date-between-sep").show();$(".date-between-end").show();var c=$(".previous-end-year").val();$(".end-year").val(c)};a.changeFilterTextForIn=function(){var c=$(".start-year").val();$("#date-facet-remove a").text(c)};a.changeFilterTextForBetween=function(){var c=$(".start-year").val();var d=$(".end-year").val();$("#date-facet-remove a").html(c+" - "+d)};a.singleYearFacetMode=function(){$("#date-facet-mode  option:[value='in']").prop("selected",true);a.applyDateFacetModeChange(true)};a.multiYearFacetMode=function(){$("#date-facet-mode  option:[value='between']").prop("selected",true);a.applyDateFacetModeChange(false)};a.applyDateFacetModeChange=function(c){a.clearDateRangeErrors();if(a.isInSingleYearMode()===true){this.hideEndYear()}else{this.showEndYear()}if(c){this.changeFilterTextForIn()}else{this.changeFilterTextForBetween()}return true};a.setDateFieldsToMatchDateMode=function(){if(a.isInSingleYearMode()===true){this.hideEndYear()}};a.copyStartYearToEndYearForInMode=function(c){if(a.isInSingleYearMode()){$(".end-year").val($(".start-year").val())}};a.isInSingleYearMode=function(){return($("#date-facet-mode  option:[value='in']").prop("selected"))};a.addInOptionForDateFacet=function(){$("#date-facet-mode").removeAttr("disabled")};a.registerSearchFocus=function(){$(".search-field .text").focus(function(){$(this).parents(".big-search").addClass("has-focus")});$(".search-field .text").blur(function(){$(this).parents(".big-search").removeClass("has-focus")})};return a};SearchWithinController=function(a){var c=function(f){a.clear(f.currentTarget)};var b=function(f){a.description(f.currentTarget)};function e(){a.registerSearchWithinFocus(c,b)}var d={init:e};return d};SearchWithinView=function(){var b=$(".search-within").val();function e(g,f){$(".search-within").focus(g);$(".search-within").blur(f)}function a(f){if($(f).val()!==b){return}$(f).val("")}function c(f){if($(f).val()!==""){return}$(f).val(b)}var d={registerSearchWithinFocus:e,clear:a,description:c};return d};DisciplinesExpander=function(){this.init=function(){$.extend($.easing,{easeOutQuad:function(f,g,e,j,h){return -j*(g/=h)*(g-2)+e}});var a=$(".show-nav").offset();$(".show-nav").click(function(){$(this).hide();$(".collapse-nav").css("display","block");$(".hide-nav").slideDown("slow");return false});$(".collapse-nav").click(function(){$(this).hide();$(".show-nav").css("display","block");$(".hide-nav").hide();$("html,body").animate({scrollTop:0},1400,"easeOutQuad",function(){});return false})}};AutoSuggestController=function(a){this.init=function(){a.initialize()}};AutoSuggestView=function(){var a={};a.initialize=function(){if($("#query").length>0){searchWidth=$(".search-field").width()-53;$(window).resize(function(){$(".ui-autocomplete").hide();searchWidth=$(".search-field").width()-53});$.ui.autocomplete.prototype._renderItem=function(b,d){var c=new AutoSuggestUtilities().highlight(this.term,d.label);return $("<li></li>").data("item.autocomplete",d).append("<a>"+c+"</a>").appendTo(b)};$("#query").autocomplete({source:"/search/suggest",appendTo:".search-field",minLength:2,select:new AutoSuggestUtilities().submitOnClick,open:function(){$(this).autocomplete("widget").css({width:searchWidth,"z-index":"999999"});return false}}).keyup(new AutoSuggestUtilities().submitOnEnter)}};return a};AutoSuggestUtilities=function(){return{highlight:function(d,c){var a=$.trim(d).split(" ").join("|");var b=new RegExp("("+a+")","gi");return c.replace(b,"<strong>$1</strong>")},submitOnEnter:function(a){if(a.keyCode===13){$(this).closest("form").trigger("submit")}},submitOnClick:function(b,a){$("#query").val(a.item.label);$(this).closest("form").trigger("submit")}}};JournalController=function(a){var b={};b.init=function(){a.registerVolumeIssueAction(b.onVolumeIssueAction)};b.onVolumeIssueAction=function(c){return a.validateVolumeIssue(c)};return b};JournalView=function(b){var a={};a.registerVolumeIssueAction=function(c){$(".browse form").submit(c)};a.registerVolumeIssueKeypressAction=function(c){$("#volume").keypress(c);$("#issue").keypress(c)};a.validateVolumeIssue=function(f){var e=f.currentTarget;a.clearErrors(e);var d=$(e).find("#volume");var c=$(e).find("#issue");if(d.val()===""){$(e).find(".volume .error-message").removeClass("hidden");d.addClass("error");if(c.val()===""){c.addClass("error")}return false}return true};a.clearErrors=function(c){$(c).find(".volume .error-message").addClass("hidden");$("#volume").removeClass("error");$(c).find(".issue .error-message").addClass("hidden");$("#issue").removeClass("error")};a.applyLimitKeystrokes=function(c){return b.applyLimitKeystrokes(c)};return a};NoAccessDropDown=function(b){var c=null;var a=null;var d=b?b:"fast";this.init=function(){c=$(".bar-access-restr");c.css("margin-top","-24px");barUnlockIcon=$(".bar-actions .icon-unlock a");a=$(".bar-wrapper");barUnlockIcon.hoverIntent({over:this.openAccessRestr,out:this.closeAccessRestr,interval:b?b:undefined})};this.openAccessRestr=function(){c.animate({marginTop:"0px"},d)};this.closeAccessRestr=function(){c.delay(1200).animate({marginTop:"-24px"},d)};this.closeAccessRestrAfterDelay=function(){getAccessClose.delay(b?b:300).animate({marginTop:"-60px",opacity:"0"},d);c.delay(b?b:300).animate({marginTop:"-24px"},d)}};NoAccess=function(){var a;getAccess=function(){$.colorbox({href:a+" .get-access",opacity:0.75,fixed:true,width:555,initialHeight:"332px",initialWidth:"555px",scrolling:false,onComplete:function(){var b=$(".requested-access");$(".btn-back").remove();$(".btn-close").show().click(function(){$.colorbox.close();return false});$("#web-shop-get-access").click(function(c){form=$("form#getaccess-webshop").addClass("lb-form");form.appendTo("body");$.colorbox.close()});requestAccess=$("#getaccess-request");requestAccess.click(function(){var c=$("#getaccess-from-admin");$.post(c.prop("action"),c.serialize(),function(){requestAccess.hide();b.fadeIn("slow");$("#colorbox,#cboxWrapper,#cboxContent,#cboxLoadedContent").height("450px")});return false})}})};if($(".icon-unlock a").length>0&&window.location.search.indexOf("no-access=true")>-1){a=$(".icon-unlock a").attr("href");getAccess()}$(".access,.col-main,.bar-dock").delegate("a.access-link,.icon-unlock a","click",function(b){a=$(this).attr("href");getAccess();b.preventDefault()})};ToolTips=function(){$("body").delegate(".help","mouseover mouseout",function(b){if(b.type==="mouseover"){var a=$(".tooltip",this);var c=$(this).offset();a.clone().appendTo("body").css({left:c.left+15,top:c.top+30}).show().addClass("tooltip-clone")}else{$(".tooltip-clone").remove()}})};BackButton=function(){this.init=function(){backButton=$(".btn-back");backButton.click(function(){history.back();return false})}};FacetSelection=function(){var a=function(c){$(c).find(".facet-expanded .functions-bar-top").replaceAll(".facet-expanded .functions-bar-top");
$(c).find(".facet-expanded ol").replaceAll("#cboxLoadedContent ol");$(c).find(".facet-expanded .functions-bar-bottom").replaceAll(".facet-expanded .functions-bar-bottom");$.colorbox.resize()};var b=function(d){var c=[];$.each($(d).find("input[type='hidden']"),function(e,f){c.push($(f).attr("name")+"="+$(f).val())});c.push("page="+$(d).find("input[name='page']").val());return c.join("&")};this.init=function(){$(".facet .highlight").each(function(){var c=$(".facet-title",this).css("color");$(".facet-title",this).css("color","#FFF");$(".facet-title",this).animate({color:c},1500,"easeOutCirc");$("a",this).append('<span class="highlight-area">');$(".highlight-area",this).animate({opacity:0},1500,"easeOutCirc")});if(jQuery().colorbox){$("a.colorbox-enabled,.facet-header .all").colorbox({href:function(){return $(this).attr("href")+" .mod.lb"},fixed:true,opacity:0.75,width:555,initialHeight:"332px",initialWidth:"555px",scrolling:false,onComplete:function(){$(".lb .btn-close").click(function(){$.colorbox.close()})}})}$("body").delegate("#cboxLoadedContent .next, #cboxLoadedContent .prev","click",function(d){d.preventDefault();var c=$(this).attr("href");if(c!==undefined){$.ajax({url:c,success:a})}return false});$("body").delegate("#cboxLoadedContent form:not(#filtering-options)","submit",function(d){d.preventDefault();var c=b(this);$.ajax({url:$(this).attr("action"),data:c,success:a});return false})}};ExportCitation=function(b){var c=b?b:"slow";var a=null;this.init=function(){a=this;if(jQuery().colorbox){$("#export-citation").colorbox({href:function(){return $(this).attr("href")+" .mod.lb"},opacity:0.75,fixed:true,scrolling:false,height:444,width:555,onComplete:function(){$(".btn-close").click(function(){$.colorbox.close()});a.addDropDown()}})}this.addDropDown()};this.addDropDown=function(){var d=$(".btn-dd");d.click(function(e){$(this).toggleClass("act").find(".menu").slideToggle(c);if($(this).parents(".mod.lb").length){e.stopPropagation()}});$(".mod.lb").parent().click(function(){d.removeClass("act").find(".menu").hide(c)})}};GetSatisfaction=function(){this.init=function(){if("undefined"===typeof GSFN){return}var c={};if($("#contact-us-get-satisfaction-container").length){var a=window.location.protocol+"//"+window.location.host;c.display="inline";c.company="springer_rd";c.height="580px";c.style="idea";c.custom_css=a+"/static/css/get_satisfaction.css";c.limit="5";c.container="contact-us-get-satisfaction-container"}else{if($("#gimme-satisfaction").length){c.display="overlay";c.company="springer_rd";c.placement="left";c.color="#666";c.style="idea";c.container="gimme-satisfaction"}else{return}}GSFN.feedback_widget.prototype.local_base_url="http://feedback.rd.springer.com";GSFN.feedback_widget.prototype.local_ssl_base_url="http://feedback.rd.springer.com";var b=new GSFN.feedback_widget(c)}};ActivateOrResetPasswordView=function(){var a=$("#invalid-password-message").html();var c=$("#mismatch-password-message").html();var b={};b.registerValidation=function(){$("#set-password-form").validate({groups:{anypassword:"password password-retype"},errorClass:"error-message",errorElement:"div",rules:{password:{required:true,minlength:6,containsDigitAndLetter:true},"password-retype":{minlength:6,containsDigitAndLetter:true,equalTo:"#password"}},messages:{password:{required:a,minlength:a,containsDigitAndLetter:a},"password-retype":{minlength:a,containsDigitAndLetter:a,equalTo:c}}})};return b};ActivateOrResetPasswordController=function(a){var b={};b.init=function(){a.registerValidation()};return b};InstitutionalLogin=function(){this.init=function(){if($("select.chosen option").length>1||($("select.chosen option").length===1&&$("select.chosen option:first").val()!=="")){$("select.chosen").chosen({no_results_text:"No results matched"})}$(".institutional-login-page .chzn-search input").attr("placeholder","Start typing to find your institution")}};RelatedItems=function(){var c={};var b=false;var a=false;c.abstractRelated=$("#abstract-related");c.getRelatedItemsUrl="/related-items/"+$(".doi").text();c.abstractRelatedTitle=$("#abstract-related .expander-title");c.abstractRelatedContent=$("#abstract-related .expander-content");c.setAsOpen=function(){b=true};c.setAsClosed=function(){b=false};c.loading=function(){c.abstractRelated.addClass("expander-loading")};c.complete=function(){c.abstractRelated.removeClass("expander-loading")};this.init=function(){if($("#content:has(#abstract-related)")){c.abstractRelated.removeClass("hidden").css("cursor","pointer");c.addClickEvent()}};c.googleAnalyticsExpanderClicked=function(){_gaq.push(["_trackEvent","Related articles","Opened section"])};c.googleAnalyticsRelatedItemClicked=function(d){_gaq.push(["_trackEvent","Related articles","Followed link",d])};c.addClickEvent=function(){c.abstractRelatedTitle.click(function(){if(b===true){c.setCloseEvent()}else{c.setOpenEvent();c.abstractRelated.addClass("expander-open").slideDown()}})};c.setOpenEvent=function(){c.abstractRelatedContent.addClass("hidden");c.doPostToGetRelatedItems();c.setAsOpen()};c.setCloseEvent=function(){c.setAsClosed();c.abstractRelated.removeClass("expander-open");c.abstractRelated.addClass("expander").css("cursor","pointer");c.abstractRelatedContent.removeClass("hidden")};c.success=function(d){c.googleAnalyticsExpanderClicked();c.abstractRelatedContent.removeClass("hidden");a=true;c.complete();$("#related-list").html(d);c.addTitleClickEvent()};c.error=function(d){setTimeout(function(){c.complete();c.abstractRelatedTitle.click();c.abstractRelatedContent.addClass("hidden");a=false},1000)};c.doPostToGetRelatedItems=function(){if(a===false){c.loading();$.ajax({url:c.getRelatedItemsUrl,success:c.success,error:c.error})}else{c.abstractRelatedContent.removeClass("hidden")}};c.addTitleClickEvent=function(){$("#related-list a").click(function(d){d.preventDefault();var e=$(this);c.googleAnalyticsRelatedItemClicked(e.attr("id"));setTimeout(function(){document.location.href=e.attr("href")},100)})}};Bootstrapper=function(){var W=$("html.ie6").length;var V=$("html.ie7").length;var S=$("html.ie8").length;var L=$("html.lt-ie9").length;var R=$(window).width();var U=(typeof window.ontouchstart!=="undefined");var w=new NumberField();var u=new DocumentHelper();var B=new ExpanderController(new ExpanderView(),u);var z=new PageController(new PageView(B));var f=new CaptiveDivController(new CaptiveDivView());var s=new PersonsController(new PersonsView("author"));var h=new PersonsController(new PersonsView("editor"));var q=new SearchView(w);var X=new SearchController(q,u);var E=new SearchWithinController(new SearchWithinView());var c=new HomeTabs();var K=new JournalController(new JournalView(w));var A=new AutoSuggestController(new AutoSuggestView("/search/suggest"));var a=new NoAccessDropDown(null);if(R>=600){var C=new NoAccess()}var J=new ToolTips();var y=new BackButton();var D=new FacetSelection();var F=new ExportCitation();var e=new GetSatisfaction();var k=new ActivateOrResetPasswordController(new ActivateOrResetPasswordView());var Z=new ForgottenPasswordController();var T=new LoadingAnimationController();var M=new CoverImageAnimation();var n=new Registration();var b=new DisciplinesExpander();var j=new FlyOut();var o=new AdminDashboardController(new AdminDashboardView(),u);var p=new EntitlementsExpander();if(typeof webtrekkProperties!=="undefined"){var g=new WebTrekk(webtrekkProperties)}var H=new SearchResultsGraph();var m=new GoogleAnalyticsHelper();var aa=new KeyboardController();var Y=new AccountDetails();var Q=new CompanyLogos();var P=new InstitutionalLogin();var r=new AdvancedSearch(q);var l=new MobileJS();var O=new MigrationBanner();var x=new LazyLoader();var t=new RelatedItems();var d=new SocialLinks();var N=new Grid();var I=new DepositInterruption();var G=new LookInside(I);this.startup=function(){G.maybeAutoOpenLookInside()};this.initialise=function(){z.init();f.init();s.init();h.init();X.init();E.init();K.init();A.init();if(R>=600){a.init()}y.init();F.init();e.init();k.init();m.init();Z.init();T.init();
M.init();n.init();c.init();b.init();j.init();o.init();p.init();if(typeof g!=="undefined"){g.init()}H.init();aa.init();Q.init();P.init();r.init();l.init();if(W===0&&V===0){Y.init()}if(U!==true){D.init()}if(U!==true&&W===0){G.init()}d.init();O.init();x.init();t.init();I.init()}};$(document).ready(function(){var a=new Bootstrapper();a.initialise();a.startup()});GoogleAnalyticsHelper=function(a){this.init=function(){var b;if(a===undefined){b=_gaq}else{b=a}var c=function(){var f=$(this).attr("parentContentType");var e=$(this).attr("publication");var d=$(this).attr("viewType");b.push(["_trackEvent",f,d,e])};$("body").delegate(".webtrekk-track","click",c);$("#reader").delegate(".webtrekk-track","click",c);if($(".document .no-access").length){_gaq.push(["_setCustomVar",1,"HAS_ACCESS","no",3])}}};ForgottenPasswordController=function(){this.init=function(){$("#forgotForm").validate({errorClass:"error-message",errorElement:"div"})}};LoadingAnimationController=function(){var a={};var b=$("body").attr("data-name")||"link";a.init=function(){$("body").delegate(".facet-link","click",function(){$(this).addClass("loading").append('<img class="loading" src="../static/sites/'+b+'/images/loading.gif" alt="" />')});$(".search-filter input.search-submit, #date-facet-submit").after('<img class="loading js-hidden" src="/static/sites/'+b+'/images/loading.gif" alt="" />');$("#search, .bar-actions input.search-submit").after('<img class="loading js-hidden" src="/static/sites/'+b+'/images/loading_search.gif" alt="" />');$("body").delegate("#date-facet-submit,.search-submit","click",function(){$(this).addClass("loading").next("img.loading").show()})};return a};KeyboardController=function(){var a=this;this.init=function(){if($(".keyboard-on").length>0){a.registerKeyPressListeners()}};this.registerKeyPressListeners=function(){$(document).keypress(function(d){var c;var f;var b;c=d.which;f=String.fromCharCode(c);b=/[A-Za-z0-9ÄäÖöÜüß\[;']/;ctrlPressed=d.ctrlKey;altPressed=d.altKey;metaPressed=d.metaKey;qualarooInput=$(".ki_text textarea");if(!$.browser.mozilla){if(b.test(f)&&!$("input,select").is(":focus")&&!ctrlPressed&&!altPressed&&!metaPressed&&!qualarooInput.is(":focus")){$("#global-search input#query").focus().val("")}}else{if(b.test(f)&&!$("input,select").is(":focus")&&!ctrlPressed&&!altPressed&&!metaPressed&&!qualarooInput.is(":focus")){$("#global-search input#query").focus().val(f)}}});$(document).keydown(function(b){if(b.which===27&&$("#global-search input#query").is(":focus")){$("#global-search input#query").focus().val("");$("#global-search input#query").blur()}})}};CoverImageAnimation=function(){var c={};var e=$(".look-inside.cover-image-animate a");var a=e.find(".look-inside-cover");var d=e.find(".look-inside-page");var b=e.find(".look-inside-badge");c.init=function(){var f={over:c.lIEnter,out:c.lILeave,timeout:500,interval:250};e.hoverIntent(f)};c.lIEnter=function(){a.animate({left:"-30px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).animate({left:"0",boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.3)"},400)});d.animate({right:"-110px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).css({zIndex:"3"}).animate({right:"0",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.3)"},400)});b.animate({right:"-110px"},300,function(){$(this).animate({right:"1px"},400)})};c.lILeave=function(){a.animate({left:"-30px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).animate({left:"0",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.3)"},400)});d.animate({right:"-110px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).css({zIndex:"1"}).animate({right:"0",boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.3)"},400)});b.animate({right:"-110px"},300,function(){$(this).animate({right:"1px"},400)})};return c};Registration=function(a){this.init=function(){if($("#registration-form").length){$("#login-box .form-field input:first").focus();$.validator.addMethod("check-email-required",$.validator.methods.required,all_messages.provideEmail_message);$.validator.addMethod("check-email-valid",$.validator.methods.email,all_messages.invalidEmail_message);$.validator.addMethod("check-email-remote",$.validator.methods.remote,all_messages.uniqueEmail_message);$.validator.addMethod("check-password-min",function(g,f){var e=this.optional(f)||(g.length>=6&&/\d/.test(g)&&/[a-z]/i.test(g));return e},all_messages.password_invalid_message);$.validator.addMethod("check-password-required",$.validator.methods.required,all_messages.password_required_message);$.validator.addClassRules({required:{required:true,minlength:1},"email-address":{"check-email-required":true,"check-email-valid":true},"email-address-test":{"check-email-remote":{url:"/email/available",beforeSend:function(e,g,f){formWidth=$(".email-address-test").parents("form").outerWidth();position=$(".email-address-test").position();$(".email-address-test").after('<img alt="" src="../core/src/main/webapp/static/images/loading.gif" class="loading">');$(".email-address-test").siblings("img.loading").css({left:formWidth-30,top:position.top+4})},complete:function(){$(".form-row img.loading").fadeOut("fast")}}},password:{"check-password-required":true,"check-password-min":{}},"password-confirm":{required:true,minlength:6,equalTo:"#password"}});if(!$("html.ie6").length){if($("html.js").length){$("#registration-form").addClass("js-validation")}if($("#registration-form").length){var c=$("input#password").position();var b=$("input#password").outerWidth();$("input#password").after('<div id="password-strength" class="progress-bar is0" style="display:none"><span class="progress"></span></div>').passwordStrength();$("#password-strength").css({left:b-64,top:c.top+8}).fadeIn()}var d={messages:{"first-name":all_messages.firstName_message,"last-name":all_messages.lastName_message,"password-confirm":{required:all_messages.password_confirm_message,minlength:all_messages.password_invalid_message,equalTo:all_messages.password_match_message},"email-address":{remote:all_messages.uniqueEmail_message}},success:function(e){e.addClass("tick");position=e.siblings("input").position();inputWidth=e.siblings("input").outerWidth();e.css({left:position.left+inputWidth+10,top:position.top+3})},showErrors:function(g,h){var f;for(f=0;h[f];f++){var e=this.errorList[f].element;this.errorsFor(e).remove()}this.defaultShowErrors()},errorPlacement:function(e,f){formWidth=f.parents("form").outerWidth();position=f.position();e.insertBefore(f);elementHeight=f.outerHeight();errorHeight=e.outerHeight();errorPos=(errorHeight-elementHeight)/2;f.siblings(".error").removeClass("tick");e.css({left:formWidth-30,top:position.top-errorPos})}};$("#registration-form").validate(d)}}if(!$(".edit-field").parents(".editing-form").length){$(".form-row-editable").click(function(){window.location.href=$("a",this).attr("href")})}}};HomeTabs=function(){var b=function(){$(".tab-content-first").addClass("hidden");$(".tab-content-last").removeClass("hidden");$(".first-tab").replaceWith(industry_tab_a);$(".last-tab").replaceWith(subjects_tab_span)};var a=function(){$(".tab-content-last").addClass("hidden");$(".tab-content-first").removeClass("hidden");$(".last-tab").replaceWith(subjects_tab_a);$(".first-tab").replaceWith(industry_tab_span)};var c=function(){if($.cookie("tabSet")==="disciplines"){b()}else{a()}};this.init=function(){if($(".categories-tab").size()!==0){industry_tab_text=$(".first-tab").text();subjects_tab_text=$(".last-tab").text();industry_tab_a=$('<a class="categories-tab first-tab" href="#"></a>').text(industry_tab_text);subjects_tab_a=$('<a class="categories-tab last-tab" href="#"></a>').text(subjects_tab_text);industry_tab_span=$('<span class="categories-tab first-tab"></span>').text(industry_tab_text);subjects_tab_span=$('<span class="categories-tab last-tab"></span>').text(subjects_tab_text);$(".categories").delegate("a.last-tab","click",function(){b();$.cookie("tabSet","disciplines");return false});$(".categories").delegate("a.first-tab","click",function(){a();$.cookie("tabSet","industries");
return false});c();$(".multi-level").delegate("h3","click",function(){$(this).toggleClass("is-open").next().slideToggle("normal")})}}};FlyOut=function(){var b=(typeof window.ontouchstart!=="undefined");var a={over:function(){},timeout:500,out:function(){if($("input:focus",this).length<=0&&b!==true){$(this).removeClass("is-open").find(".pillow-btn-active").removeClass("pillow-btn-active");$("body").removeClass("show-footer-menu");$(".flyout-caption",this).blur()}}};this.init=function(){$(".flyout").click(function(c){if($(this).hasClass("is-open")){if(!$("form",this).length){$(this).removeClass("is-open")}}else{$(this).addClass("is-open")}c.stopPropagation()}).hoverIntent(a);$(document).click(function(){if(b!==true){$(".flyout.is-open").removeClass("is-open").find(".pillow-btn-active").removeClass("pillow-btn-active")}})}};AdminDashboardController=function(a,b){var c={};c.init=function(){a.registerOrganizationSelectionListener(c.redirectToOrganizationCounterReportUri);a.registerArchiveYearSelectionListener(c.redirectToOrganizationCounterReportUriArchive);a.registerForceLoginToggleSettingListener(c.toggleForceLoginSetting);a.registerAutoAssociateToggleSettingListener(c.toggleAutoAssociateSetting);a.registerDepositInterruptionToggleSettingListener(c.toggleDepositInterruptionSetting);a.registerDeleteLogoListener(c.deleteLogo);a.registerRemoveCounterErrorMsgListener(c.removeCounterErrorMsg);$("#submit-archive-year").hide();$("#toggle-force-login-cancel").add("#toggle-auto-associate-cancel").add("#toggle-deposit-interruption-cancel").click(function(d){$.colorbox.close();return false});$("#deletelogo-cancel").click(function(d){$.colorbox.close();return false})};c.redirectToOrganizationCounterReportUri=function(){b.reloadPageWithQuery("bp="+$("#change-institution option:selected").val())};c.redirectToOrganizationCounterReportUriArchive=function(){b.reloadPageWithQuery("bp="+$("#change-institution option:selected").val()+"&archive-year="+$("#archive-year option:selected").val()+"#reports-archive")};c.toggleForceLoginSetting=function(){var d=this;$.fn.colorbox({href:".mod-force-login",fixed:true,inline:true,opacity:0.75,scrolling:false,width:300,onOpen:function(){$("#toggle-force-login-cancel").focus();$("#toggle-force-login-confirm").attr("href",d.href)}});return false};c.toggleAutoAssociateSetting=function(){var d=this;$.fn.colorbox({href:".mod-auto-associate",fixed:true,inline:true,opacity:0.75,scrolling:false,width:300,onOpen:function(){$("#toggle-auto-associate-cancel").focus();$("#toggle-auto-associate-confirm").attr("href",d.href)}});return false};c.toggleDepositInterruptionSetting=function(){var d=this;$.fn.colorbox({href:".mod-deposit-interruption",fixed:true,inline:true,opacity:0.75,scrolling:false,width:300,onOpen:function(){$("#toggle-deposit-interruption-cancel").focus();$("#toggle-deposit-interruption-confirm").attr("href",d.href)}});return false};c.deleteLogo=function(){var d=this;$.fn.colorbox({href:".modlogo",inline:true,fixed:true,opacity:0.75,scrolling:false,width:300,onOpen:function(){$("#deletelogo-cancel").focus();$("#deletelogo-confirm").click(function(e){$(d).parent().submit()})}});return false};c.removeCounterErrorMsg=function(){$(".counter-reports .error-message").hide()};return c};AdminDashboardView=function(){var a={};a.registerOrganizationSelectionListener=function(b){$("#change-institution").change(b)};a.registerArchiveYearSelectionListener=function(b){$("#archive-year").change(b)};a.registerForceLoginToggleSettingListener=function(b){$(".enforced-toggle a.toggled-off").click(b)};a.registerAutoAssociateToggleSettingListener=function(b){$(".access-toggle a.toggled-off").click(b)};a.registerDepositInterruptionToggleSettingListener=function(b){$(".deposit-interruption-toggle a.toggled-off").click(b)};a.registerDeleteLogoListener=function(b){$(".remove-logo").click(b)};a.registerRemoveCounterErrorMsgListener=function(b){$("#download-report-button").click(b)};return a};EntitlementsExpander=function(){this.init=function(){if($(".entitlements").length>1){$(".default-table caption").addClass("closed");$(".default-table thead,.default-table tbody").hide()}$(".entitlements caption").click(function(){$(this).toggleClass("closed");thisTable=$(this).parent();thisTable.find("thead,tbody").toggle();return false})}};SearchResultsGraph=function(){this.init=function(){var a=$("#results-per-date");if(!a||!a.text()){return}graph_data=jQuery.parseJSON(a.text());$.plot($("#pub-date-graph"),[graph_data],{lines:{show:true,color:"red",fill:true,fillColor:"#c2c2c2",lineWidth:1},yaxis:{show:false},xaxis:{mode:"time",color:"#555"},colors:["#a7a7a7"],grid:{color:"silver",borderColor:"silver",borderWidth:1},shadowSize:0})}};WebTrekk=function(a){this.init=function(){if("undefined"===typeof webtrekkV3){return}var b=this.defaultWebTrekkRequest();if($("#web-trekk-abstract").length){b=this.productWebTrekkRequest($("#web-trekk-abstract"))}this.sendInfo(b);this.webTrekkLogger(".webtrekk-track")};this.defaultWebTrekkRequest=function(b){var d={trackDomain:a.trackDomain,trackId:a.trackId,linkTrack:"link",heatmap:"1",form:"1",contentId:a.pageType};var c=this.newWebTrekk(d);if(a.userDetails){c.customSessionParameter=a.userDetails}return c};this.newWebTrekk=function(c){var b={};try{b=new webtrekkV3(c)}catch(d){}return b};this.productWebTrekkRequest=function(f){var g=this.defaultWebTrekkRequest(f);var e=f.attr("doi");var h=f.attr("contentType").toLowerCase();var c=f.attr("publication");var b=f.attr("viewType").toLowerCase();var d=f.attr("pageType");if(d){g.contentId=d}g.product=e;g.productStatus="view";g.productCategory={1:h,2:c};g.customEcommerceParameter={1:b};return g};this.sendInfo=function(c){try{c.sendinfo()}catch(b){}};this.webTrekkLogger=function(b){var c=this;var d=function(){var e=c.productWebTrekkRequest($(this));c.sendInfo(e)};$("body").delegate(b,"click",d);$("#reader").delegate(b,"click",d)}};AccountDetails=function(){var a={};this.init=function(){a.setupCancelButton();a.setupFormSubmit();$(".organisation-section ul li a.action").click(this.clickFunction)};this.clickFunction=function(c){var b=$(this).attr("data-bpid");c.preventDefault();a.changeDetailsPressed(b)};a.changeDetailsPressed=function(c){var b=$("li.bpid-"+c).parents(".organisation-section");var d=$("li.bpid-"+c).find("a").attr("href");if(!$(".form-container",b).length){b.append('<div class="form-container" style="display:none"></div>')}$("li.bpid-"+c).parent().slideUp(500,"easeInOutQuad",function(){b.find(".form-container").load(d+" form.add-organisation-details",function(){b.find(".form-container").slideDown(500,"easeInOutQuad")})})};a.setupCancelButton=function(){$(".association-cancel").live("click",function(b){b.preventDefault();a.cancel($(this).attr("data-bpid"))})};a.cancel=function(b){$("form.bp-"+b).parent().slideUp(500,"easeInOutQuad",function(){$("li.bpid-"+b).parent().slideDown(500,"easeInOutQuad")})};a.setupFormSubmit=function(){$("form.add-organisation-details").live("submit",function(b){a.postForm($(this));return false})};a.postForm=function(b){$.ajax({type:"POST",url:"/account/save-associate-details",data:b.serialize(),success:function(){a.updateFields(b)},error:function(f,h,g){var d=f.responseText;var c=$(d).find("#error p");if(c){var e=c.addClass("error-message").css("margin-top","7px");b.children(".form-section").append(e)}}})};a.updateFields=function(c){var e=c.attr("data-bpid");var d=$("#department-"+e);var b=$("#costcode-"+e);var f=$(".bpid-"+e+" a.action");a.showHideUpdateLabels(c.find(".department"),d);a.showHideUpdateLabels(c.find(".cost-code"),b);if(d.text().length>0||b.text().length>0){f.text($("#details-label.hidden").text())}else{f.text($("#cost-label.hidden").text())}a.cancel(e)};a.showHideUpdateLabels=function(c,b){if(c.val().length>0){b.parent().removeClass("hidden")}else{b.parent().addClass("hidden")}b.text(c.val())}};CompanyLogos=function(){var a={};this.changeLogo=function(){var b=$("#logo-company");var c=b.find("img:visible");var d=c.next("img");if(d.length===0){d=b.find("img:first")
}c.fadeOut(500,function(){d.fadeIn(500)})};this.init=function(){if($("#logo-company img").length>1){setInterval(this.changeLogo,6000)}}};AdvancedSearch=function(b){var a={};a.init=function(){$("#advanced-search-form").submit(function(){b.copyStartYearToEndYearForInMode()});b.setDateFieldsToMatchDateMode()};return a};MobileJS=function(){var b=$(window).width();var a=function(){$(".pillow-btn").click(function(){$(this).toggleClass("pillow-btn-active")});$(".open-search").click(function(){$("body").toggleClass("show-search")});$(".open-menu").click(function(){$("body").toggleClass("show-menu")});$(".open-search-options").click(function(){$("body").toggleClass("show-search-options")});$(".open-legal").click(function(){$("body").toggleClass("show-legal")});$("#footer-verticals .pillow-btn").click(function(){$("body").toggleClass("show-footer-menu")})};var c=function(){if(b<600){$(".expander").removeClass("expander-open")}};this.init=function(){a();c()}};MigrationBanner=function(){var a=$(window).width();var b={};this.init=function(){b.setRedirectionBannerVisibility();b.setupBanner()};b.setRedirectionBannerVisibility=function(){var c=b.getRedirectPrompt();if(c.length){if($.cookie("MigrationBanner")==="On"){c.removeClass("hidden")}else{c.remove()}}};b.getRedirectPrompt=function(){return $("#redirect-prompt")};b.setupBanner=function(){if(b.getRedirectPrompt().length&&!b.getRedirectPrompt().hasClass("hidden")){b.checkForMobile();b.checkForLessThanIE9();b.checkForLessThanIE8();b.imGoodButtonClickEvent()}};b.checkForLessThanIE9=function(){var c=b.getRedirectPrompt();if(!$("html.lt-ie9").length){$(window).resize(function(){if(c.length){if(a>=1007){c.css("margin-top","0");$("html").css("padding-top","42px")}else{if(a<1007){c.css("margin-top","57px");$("html").css("padding-top","57px")}}}})}};b.checkForLessThanIE8=function(){if(!$(".lt-ie8").length){$(".more-info").toggle(function(){$("#redirect-prompt .prompt-wrapper").before($('<div class="more-info-wrapper">').load("/static/html/migration-banner-info.html",".more-info-text",function(){$(this).slideDown("fast")}));return false},function(){$(".more-info-wrapper").slideUp("fast");return false})}};b.checkForMobile=function(){var c=b.getRedirectPrompt();if(a>=1007||$("html.lt-ie9").length){c.css({marginTop:"0"},500);$("html").animate({paddingTop:"42"},500)}else{if(a<1007){c.animate({marginTop:"57"},500);$("html").animate({paddingTop:"57"},500)}}};b.imGoodButtonClickEvent=function(){var c=b.getRedirectPrompt();$("#redirect-prompt button").click(function(){b.switchOffMigrationBannerCookie();if($(".more-info-text").length){$(".more-info-wrapper").slideUp("fast",function(){$("html").delay(300).animate({paddingTop:"0"},500);c.delay(300).animate({top:"-100"},900,function(){c.remove()})})}else{$("html").animate({paddingTop:"0"},500);c.animate({top:"-100"},900,function(){c.remove()})}return false})};b.switchOffMigrationBannerCookie=function(){var c=$("#cookie-domain").text();$.cookie("MigrationBanner","Off",{expires:365,path:"/",domain:c})}};LazyLoader=function(){var a=$(window).width();lazyloaded=false;this.init=function(){if(a>=600){$("img.lazy").show().lazyload()}$(window).resize(function(){a=$(window).width();if(lazyloaded===false&&a>=600){$("img.lazy").show().lazyload();lazyloaded=true}})}};SocialLinks=function(){function b(f,e){leftPosition=(window.screen.width/2)-((f/2)+10);topPosition=(window.screen.height/2)-((e/2)+50);windowFeatures="status=no,height="+e+",width="+f+",resizable=yes,left="+leftPosition+",top="+topPosition+",screenX="+leftPosition+",screenY="+topPosition+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no";url=location.href;socialTitle=$("h1#title").text();socialTitle=socialTitle.replace(/(\r\n|\n|\r)\s{2,}/gm," ");fb_text="I'm reading "+socialTitle;li_text="I'm reading this article";tw_text="I'm reading "+socialTitle;hashtag="springerlink"}function d(){window.open("http://www.facebook.com/sharer.php?s=100&p[title]="+encodeURIComponent(fb_text)+"&p[url]="+encodeURIComponent(url),"sharer",windowFeatures);return false}function a(){window.open("http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(url)+"&title="+encodeURIComponent(socialTitle)+"&summary="+encodeURIComponent(li_text),"sharer",windowFeatures);return false}function c(){window.open("https://twitter.com/intent/tweet?hashtags="+encodeURIComponent(hashtag)+"&url="+encodeURIComponent(url)+"&text="+encodeURIComponent(tw_text),"sharer",windowFeatures);return false}this.init=function(){$("#facebook").click(function(){b(550,520);d()});$("#linkedin").click(function(){b(550,520);a()});$("#twitter").click(function(){b(550,520);c()})}};Grid=function(){var a=940;this.init=function(){$.shift=function(e,f,d){$(document).keydown(function(g){if(!d){d=[]}if(g.keyCode===e.charCodeAt(0)&&g.shiftKey){f.apply(this,d);return false}})};setupGrid=function(){a=$("#content").width();$(".gridToggle").removeClass("gridOff");$("#content").append('<div id="grid"></div>');contentheight=$("#content").outerHeight();for(i=0;i<47;i++){$("#grid").append('<div class="slice"></div>')}$("#grid").css({height:contentheight+165,maxWidth:a})};$(window).resize(function(){if($("#grid").length){c();clearTimeout(this.id);this.id=setTimeout(c,200)}});function c(){a=$("#content").width();$("#grid").css("max-width",a)}var b;$.shift("6",function(){$("#grid, .gridToggle").remove();setupGrid();if($(".layout-1").length){$("#grid").addClass("layout1");b="layout1"}if($(".layout-2").length){$("#grid").addClass("layout2");b="layout2"}if($(".layout-3").length){$("#grid").addClass("layout3");b="layout3"}if($(".layout-3b").length){$("#grid").addClass("layout3b");b="layout3b"}if($(".layout-4").length){$("#grid").addClass("layout4");b="layout4"}if($(".layout-5").length){$("#grid").addClass("layout5");b="layout5"}$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')});$.shift("7",function(){b=3;$("#grid, .gridToggle").remove();setupGrid();$("#grid").addClass("grid3");$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')});$.shift("8",function(){b=6;$("#grid, .gridToggle").remove();setupGrid();$("#grid").addClass("grid6");$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')});$.shift("9",function(){b=12;$("#grid, .gridToggle").remove();setupGrid();$("#grid").addClass("grid12");$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')});$.shift("0",function(){$("#grid, .gridToggle").remove()});$("body").delegate(".gridToggle","click",function(){if($(this).hasClass("gridOff")){setupGrid();if(b===3){$("#grid").addClass("grid3")}if(b===6){$("#grid").addClass("grid6")}if(b===12){$("#grid").addClass("grid12")}if(b==="layout1"){$("#grid").addClass("layout1")}if(b==="layout2"){$("#grid").addClass("layout2")}if(b==="layout3"){$("#grid").addClass("layout3")}if(b==="layout3b"){$("#grid").addClass("layout3b")}if(b==="layout4"){$("#grid").addClass("layout4")}if(b==="layout5"){$("#grid").addClass("layout5")}}else{$("#grid").remove();$(".gridToggle").addClass("gridOff")}})}};function showDepositInterruptionModal(a){$.colorbox({href:"/interruption .mod",opacity:0.75,width:300,overlayClose:false,onOpen:function(){$("#cboxOverlay, #colorbox").css("z-index","9999")},onComplete:function(){$("#cost-code").focus();$("#colorbox .btn-monster").click(function(){var b=$("#cost-code").val();document.location.href=a+"?costCode="+b+"&ic=1"});$("#colorbox .cancel").click(function(b){b.preventDefault();$.colorbox.close()})}})}DepositInterruption=function(){var a={};a.init=function(){var b=function(d){d.preventDefault();var g=$(this).attr("contentType");var f=$(this).attr("doi");var c=$(this).attr("href");if(a.isDepositInterruptible(g,f)){showDepositInterruptionModal(c)}else{a.sendToPdf(c)}};$(document).delegate(".deposit-interrupt","click",b);$("#reader").delegate(".deposit-interrupt","click",b)};a.isDepositInterruptible=function(e,d){var b="/deposit-interrupt/shouldinterrupt?contentType="+e+"&contentId="+d;
var c=false;$.ajax({url:b,async:false,success:function(f){var g=$.parseJSON(f);c=g.displayPopup}});return c};a.sendToPdf=function(b){document.location.href=b};return a};