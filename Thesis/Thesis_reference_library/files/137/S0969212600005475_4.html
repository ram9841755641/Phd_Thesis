<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="wpd_version" content="0.2">
<meta name="wpd_baseurl" content="http://www.sciencedirect.com/science/article/pii/S0969212600005475">
<meta name="wpd_url" content="http://sciverse-shindig.elsevier.com/gadgets/ifr?container=default&amp;mid=1&amp;nocache=1&amp;country=ALL&amp;lang=ALL&amp;view=profile&amp;parent=http%3A%2F%2Fwww.sciencedirect.com%2Fscience%2Farticle%2Fpii%2FS0969212600005475%3A%2F%2Fwww.sciencedirect.com&amp;up_startMeInvisible=y&amp;st=john.doe:john.doe:appid:cont:url:0:default&amp;url=http%3A%2F%2Fae-content.elsevier.com%2Fsvapp%2F300959%2Fprod%2Fprivate%2Fspec.xml#rpctoken=1787671448">
<meta name="wpd_date" content="2013-04-09T14:42Z">
<script src="ga.js" async="" type="text/javascript"></script><script>window['__isgadget']=true;</script><script src="corerpc.js"></script><script>gadgets.sciverse={};
(function(){gadgets.sciverse.getAllResults=function(A){gadgets.rpc.call(null,"getAllResults",A,null)
};
gadgets.sciverse.getArticleContent=function(A){if(typeof (A)=="undefined"||A==null){return 
}var B="gac";
gadgets.rpc.call(null,"getArticleContent",null,false,B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.getCurrentArticleContent=function(A){if(typeof (A)=="undefined"||A==null){return 
}var B="gcac";
gadgets.rpc.call(null,"getArticleContent",null,true,B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.getContent=function(B,A){if(typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"getContent",null,B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.getContextInfo=function(A){gadgets.rpc.call(null,"getContextInfo",A,null)
};
gadgets.sciverse.getEuidCookie=function(A){gadgets.rpc.call(null,"getEuidCookie",A,null)
};
gadgets.sciverse.getPageUrl=function(A){gadgets.rpc.call("","getPageUrl",A,null)
};
gadgets.sciverse.getResults=function(A,B){gadgets.rpc.call(null,"getResults",B,A)
};
gadgets.sciverse.getSubjectAreas=function(B,A){if(typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"getSubjectAreas",null,B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.getSubType=function(B,A){if(typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"getSubType",null,B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.addButtonsToAllResults=function(D,A,C,B){if(typeof (D)=="undefined"||D==null){return 
}if(typeof (B)=="undefined"||B==null){return 
}gadgets.rpc.call("","addButtons",D,null,A,C);
gadgets.rpc.register(C,B)
};
gadgets.sciverse.addButtonsToResults=function(E,A,B,D,C){if(typeof (E)=="undefined"||E==null){return 
}if(typeof (C)=="undefined"||C==null){return 
}gadgets.rpc.call("","addButtons",E,A,B,D);
gadgets.rpc.register(D,C)
};
gadgets.sciverse.closeAllMyHovers=function(){gadgets.rpc.call("","closeAllMyHovers",null,null)
};
gadgets.sciverse.closeCanvasView=function(){gadgets.rpc.call("","closeCanvasView",null,null)
};
gadgets.sciverse.closeHover=function(A){if(typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"closeHover",null,A)
};
gadgets.sciverse.entitleGadget=function(A){gadgets.rpc.call("","entitleGadget",null,A)
};
gadgets.sciverse.executeSearch=function(A){gadgets.rpc.call(null,"executeSearch",null,A)
};
gadgets.sciverse.invokeColumnView=function(B,A){gadgets.rpc.call(null,"invokeColumnView",null,B,A)
};
gadgets.sciverse.invokeResultsView=function(A,B){gadgets.rpc.call(null,"invokeResultsView",null,A,B)
};
gadgets.sciverse.invokeWorkSpaceView=function(A){gadgets.rpc.call(null,"invokeWorkSpaceView",null,A)
};
gadgets.sciverse.makeContentApiRequest=function(B,F,D){var C="1";
var A="?";
if(B.indexOf("?")>-1){A="&"
}B=[B,A,"nocache=",C].join("");
var E={};
E[gadgets.io.RequestParameters.HEADERS]=D;
E[gadgets.io.RequestParameters.AUTHORIZATION]=gadgets.io.AuthorizationType.NONE;
if(D.Accept=="application/json"){E[gadgets.io.RequestParameters.CONTENT_TYPE]=gadgets.io.ContentType.JSON
}else{if(D.Accept=="application/atom+xml"){E[gadgets.io.RequestParameters.CONTENT_TYPE]=gadgets.io.ContentType.FEED
}}gadgets.io.makeRequest(B,F,E)
};
gadgets.sciverse.makeMeInvisible=function(){gadgets.rpc.call("","makeMeInvisible",null,null)
};
gadgets.sciverse.makeMeVisible=function(){gadgets.rpc.call("","makeMeVisible",null,null)
};
gadgets.sciverse.makeRequest=function(B,F,E,C){if(typeof (C)=="undefined"||C==null){C=true
}if(C){var D="1";
var A="?";
if(B.indexOf("?")>-1){A="&"
}B=[B,A,"nocache=",D].join("")
}gadgets.io.makeRequest(B,F,E)
};
gadgets.sciverse.linkText=function(D,B,F,A,E,C){if(typeof (C)=="undefined"||C==null){return 
}gadgets.rpc.call("","linkText",null,D,B,F,A,E);
gadgets.rpc.register(E,C)
};
gadgets.sciverse.removeButtonsFromAllResults=function(){gadgets.rpc.call("","removeButtons",null,null)
};
gadgets.sciverse.removeButtonsFromResults=function(A,B){gadgets.rpc.call("","removeButtons",null,A,B)
};
gadgets.sciverse.returnQuerySuggestions=function(B,A){if(typeof (B)=="undefined"||B==null||typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"suggest",null,B,A)
};
gadgets.sciverse.showHoverView=function(B,A,C){if(typeof (C)=="undefined"||C==null){return 
}gadgets.rpc.call(null,"showHoverView",C,B,A)
};
gadgets.sciverse.subscribeHighlightedText=function(B,A){if(typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"subscribe",null,"highlightedText",B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.subscribeToInterRef=function(B,A){if(typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"subscribe",null,"interRef",B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.subscribeToNavigatorSelection=function(B,A){if(typeof (A)=="undefined"||A==null){alert("Please provide a callback handler");
return 
}gadgets.rpc.call(null,"subscribe",null,"selection",B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.subscribeToResults=function(B,A){if(typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"subscribe",null,"results",B);
gadgets.rpc.register(B,A)
};
gadgets.sciverse.subscribeToQuery=function(B,A){if(typeof (A)=="undefined"||A==null){return 
}gadgets.rpc.call(null,"subscribe",null,"query",B);
gadgets.rpc.register(B,A)
}
}());;
gadgets.window=gadgets.window||{};
(function(){gadgets.window.getViewportDimensions=function(){var A=0;
var B=0;
if(self.innerHeight){A=self.innerWidth;
B=self.innerHeight
}else{if(document.documentElement&&document.documentElement.clientHeight){A=document.documentElement.clientWidth;
B=document.documentElement.clientHeight
}else{if(document.body){A=document.body.clientWidth;
B=document.body.clientHeight
}}}return{width:A,height:B}
}
})();;
gadgets.window=gadgets.window||{};
(function(){var C;
function A(F,D){var E=window.getComputedStyle(F,"");
var G=E.getPropertyValue(D);
G.match(/^([0-9]+)/);
return parseInt(RegExp.$1,10)
}function B(){var E=0;
var D=[document.body];
while(D.length>0){var I=D.shift();
var H=I.childNodes;
for(var G=0;
G<H.length;
G++){var J=H[G];
if(typeof J.offsetTop!=="undefined"&&typeof J.scrollHeight!=="undefined"){var F=J.offsetTop+J.scrollHeight+A(J,"margin-bottom");
E=Math.max(E,F)
}D.push(J)
}}return E+A(document.body,"border-bottom")+A(document.body,"margin-bottom")+A(document.body,"padding-bottom")
}gadgets.window.adjustHeight=function(I){var F=parseInt(I,10);
var E=false;
if(isNaN(F)){E=true;
var K=gadgets.window.getViewportDimensions().height;
var D=document.body;
var J=document.documentElement;
if(document.compatMode==="CSS1Compat"&&J.scrollHeight){F=J.scrollHeight!==K?J.scrollHeight:J.offsetHeight
}else{if(navigator.userAgent.indexOf("AppleWebKit")>=0){F=B()
}else{if(D&&J){var G=J.scrollHeight;
var H=J.offsetHeight;
if(J.clientHeight!==H){G=D.scrollHeight;
H=D.offsetHeight
}if(G>K){F=G>H?G:H
}else{F=G<H?G:H
}}}}}if(F!==C&&!isNaN(F)&&!(E&&F===0)){C=F;
gadgets.rpc.call(null,"resize_iframe",null,F)
}}
}());
var _IG_AdjustIFrameHeight=gadgets.window.adjustHeight;;
var tamings___=tamings___||[];
tamings___.push(function(A){caja___.whitelistFuncs([[gadgets.window,"adjustHeight"],[gadgets.window,"getViewportDimensions"]])
});;
</script><script src="jquery.min.js"></script><script>gadgets.config.init({"shindig.auth":{},"rpc":{"passReferrer":"c2p:query","parentRelayUrl":"/container/rpc_relay.html","useLegacyProtocol":false,"commSwf":"http://idc311-sciverse-shindig.elsevier.com/xpc.swf"},"core.util":{"sciverse":{},"dynamic-height":{},"org.jquery.core-1.4.2":{},"core":{}},"core.io":{"proxyUrl":"//%host%/gadgets/proxy?container=default&refresh=%refresh%&url=%url%%rewriteMime%","jsonProxyUrl":"//%host%/gadgets/makeRequest"}});
</script><script>gadgets.Prefs.setMessages_({});gadgets.Prefs.setDefaultPrefs_({"startMeInvisible":"y"});gadgets.io.preloaded_=[];</script>





	
<link rel="stylesheet" type="text/css" href="S0969212600005475_4.css" media="all">
</head>
<body dir="ltr"><script src="concat_001.dat" type="text/javascript"></script><script type="text/javascript">


	/*Local URL*/
	//var serverUrl ='http://138.12.195.4:8080/ImageLinkingWeb/ImageLinkingServlet?';	
	/*DEV URL*/
	//var serverUrl ='http://dvc7617:27551/ImageLinkingWeb/ImageLinkingServlet?';	
	/*CERT URL*/
	//var serverUrl ='http://cdc310-elsevier-apps.sciverse.com/ImageLinkingWeb/ImageLinkingServlet?';
	/*PROD URL*/
	var serverUrl ='http://elsevier-apps.sciverse.com/ImageLinkingWeb/ImageLinkingServlet?';
	
	var context;  
	var doi,issn;	
	
    function run(){
   		gadgets.sciverse.getContextInfo(init); 
    }
    
	function init(data){
		var doiParam, issnParam, url;
		var params = {};
		
        context = data;
		doi = context.doi;					
		doiParam = 'doi='+doi;
		issn = context.issn;
		issnParam = 'issn='+issn;
		url=serverUrl+doiParam+'&'+issnParam;
		//alert('url='+url);
		params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.JSON;		
		gadgets.sciverse.makeRequest(url, handleResponse, params);
	} 	  	
	
	function handleResponse(response){	
		var showGadget = false;		
		if(response.data == undefined){
			gadgets.sciverse.makeMeInvisible();
		}		
		if(response.data.visible){
			//show gadget logic						
			//alert('response'+response['text']);
			//alert('issnTitle : '+response.data.issn[0].issnTitle);			
			for(i=0;i<response.data.links.length;i++)
			{
				var imageUrl = response.data.links[i].bannerLink;
				var linkUrl = response.data.links[i].deepDiveLink;
				if(imageUrl != null && linkUrl != null)
				{			
					if(response.data.links[i].shindigManipulationRequired)
					{
						//Handle EarthChem Banner Image.
						//alert('Requires Shindig manipulation');
						var srcVal = $("#dummy").attr("src");
						//alert('srcVal : '+srcVal);
						var positionVal = srcVal.indexOf("url=");
						var subStringVal = srcVal.substring(0,positionVal);
						imageUrl = subStringVal +'url='+ response.data.links[i].bannerLink;		
						//alert('Earthchem URL : '+imageUrl);
					}				
					
					var index = i+1;
					var newDiv = document.createElement('div');
					var newDivId  = 'imgDiv'+index;
					/*var newDivStyle = 'padding-bottom:6px; width:99%;'*/
					/*var newDivStyle = 'margin:0px 9px 6px; width:238px; border:1px solid;'*/
					var newDivStyle = 'margin:0px 9px 6px;';
					newDiv.setAttribute('id', newDivId);
					newDiv.setAttribute('style', newDivStyle);
					
					/*IE workaround to set style*/
					newDiv.style.cssText = newDivStyle;
					
					var newImageId = 'img'+index;
					var newDivInnerHTML = '<a href=\''+linkUrl+'\' target=\'_blank\' onClick=\'gadgetAnalytics.trackEvent(\"Click\", \"Banner Image\");\'><img id=\''+newImageId+'\' src=\''+imageUrl+'\'/></a>';
					//alert(newDivInnerHTML);					
					newDiv.innerHTML = newDivInnerHTML;			
					document.getElementById('article_linking').appendChild(newDiv);					
					showGadget = true;						
				}					
			}			
		}else{
			//visible is false. Hide gadget logic
			gadgets.sciverse.makeMeInvisible();
		}

		if(showGadget){
			//alert('Show Gadget');
			gadgets.sciverse.makeMeVisible();			
			gadgetAnalytics.setContextInfo(context);
			gadgetAnalytics.trackPageview('Data for this Article', context);
			//alert('adjust height called');
			setTimeout("gadgets.window.adjustHeight()",500);					
		}else{			
			gadgets.sciverse.makeMeInvisible();
		}
	}	
	
	function openMoreInfo() {
		var newWindow = open('http://www.applications.sciverse.com/action/appDetail/300959');
	}
	
	gadgets.util.registerOnLoadHandler(run);
	
	/*function test(){
		run();
	}*/		

	$(window).resize(function() {
		//alert('adjust height called');
		setTimeout("gadgets.window.adjustHeight()",500);	
	});
	
	/*window.onload = function(){alert('onload');setTimeout("gadgets.window.adjustHeight()",500);};*/

</script><div id="container">
		<div id="heading-bar">
			<div id="heading-bar-left">

				Data for this Article			  
			</div>
		</div>
		<div class="moreInfo">
			<a href="javascript:openMoreInfo();" onclick="gadgetAnalytics.trackEvent('Click', 'MoreInfo');" style="color: rgb(49, 108, 157); text-decoration: none;">

				More information on this application
			</a>
		</div>
		<div class="summary">

			Data for this article is available at the following data repositories:
		</div>	
		<div id="article_linking">
		</div>
		<img id="dummy" src="proxy" style="display: none;">
	</div>

<script>gadgets.util.runOnLoadHandlers();</script></body>
</html>
